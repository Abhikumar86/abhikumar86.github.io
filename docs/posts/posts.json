[
  {
    "path": "posts/2021-10-27-churdhar-wls/",
    "title": "Churdhar Wildlife Sanctuary",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Abhishek Kumar",
        "url": "https://akumar.netlify.app/"
      }
    ],
    "date": "2021-10-27",
    "categories": [
      "protected areas",
      "Himalayas",
      "Himachal Pradesh",
      "Churdhar Wildlife Sanctuary"
    ],
    "contents": "\r\n\r\nContents\r\nClimate\r\nVegetation\r\n\r\n\r\n\r\nShow code\r\n\r\nlibrary(dplyr)       # general data wrangling\r\nlibrary(raster)      # raster data\r\nlibrary(sf)          # spatial data handling\r\nlibrary(tmap)        # thematic mapping\r\n\r\n\r\n\r\n\r\n\r\nShow code\r\n\r\n## extract boundaries and data from OpenStreetMap\r\nlibrary(osmdata)\r\n\r\n## define a bounding box for area of interest\r\nosm_bbox <- c(77.3578, 30.8035, 77.5207, 30.9214) # xmin, ymin, xmax, ymax\r\n\r\n## extract boundary of the protected area as sf from OpenStreetMap (osm)\r\nprotected_areas <- opq(osm_bbox) |>\r\n  add_osm_feature(key = \"boundary\", value = \"protected_area\", value_exact = F) |>\r\n  osmdata_sf()\r\n\r\n## rename protected areas to short names and save to local file as gpkg\r\nprotected_areas$osm_polygons |> dplyr::select(name, geometry) |>\r\n  st_write(\"data/churdhar_wls.gpkg\")\r\n\r\n## extract rivers / streams (waterways) from osm as sf\r\nwaterways <- opq(osm_bbox) |> add_osm_feature(key = \"waterway\") |> \r\n  osmdata_sf()\r\n\r\n## save waterways to local file as gpkg\r\nwaterways$osm_lines |> dplyr::select(name, waterway, geometry) |> \r\n  st_write(\"data/waterways.gpkg\")\r\n\r\n## extract roadways (highway) major roads from osm as sf\r\nhighways <- opq(osm_bbox) |> add_osm_feature(key = \"highway\") |> \r\n  osmdata_sf()\r\n\r\n## save roadways to local file as gpkg\r\nhighways$osm_lines |> dplyr::select(highway, geometry) |> \r\n  st_write(\"data/highways.gpkg\")\r\n\r\n## load, merge, and crop pre-downloaded SRTM 30 m elevation data \r\nelev <- raster(\"D:/spatial-data/dem/n30_e077_1arc_v3.tif\") |>\r\n    crop(extent(77.3578, 77.5207, 30.8035, 30.9214)) # xmin, xmax, ymin, ymax\r\n\r\n## prepare and save hillshade\r\nhillShade(\r\n    # extract slope from elevation\r\n    slope = terrain(elev, opt= \"slope\"),\r\n    \r\n    # extract aspect from elevation\r\n    aspect = terrain(elev, opt= \"aspect\"), \r\n    \r\n    # 45 altitude angle and 315 azimuth angle\r\n    angle = 45, direction = 315) |> \r\n    writeRaster(\"data/hill_shade.tif\")\r\n\r\n## mask elevation for study site\r\ncwls_elevation <- elev |> mask(protected_areas$osm_polygons)\r\n\r\n## remove all files from environment\r\nrm(list = ls())\r\n\r\n\r\n\r\n\r\n\r\nShow code\r\n\r\nhill_shade <- raster(\"data/hill_shade.tif\")\r\nchurdhar_wls <- st_read(\"data/churdhar_wls.gpkg\")\r\n\r\n\r\n#> Reading layer `churdhar_wls' from data source \r\n#>   `D:\\R\\abhikumar86.github.io\\_posts\\2021-10-27-churdhar-wls\\data\\churdhar_wls.gpkg' \r\n#>   using driver `GPKG'\r\n#> Simple feature collection with 1 feature and 1 field\r\n#> Geometry type: POLYGON\r\n#> Dimension:     XY\r\n#> Bounding box:  xmin: 77.39974 ymin: 30.81075 xmax: 77.51013 ymax: 30.91007\r\n#> Geodetic CRS:  WGS 84\r\n\r\nShow code\r\n\r\nwaterways <- st_read(\"data/waterways.gpkg\")\r\n\r\n\r\n#> Reading layer `waterways' from data source \r\n#>   `D:\\R\\abhikumar86.github.io\\_posts\\2021-10-27-churdhar-wls\\data\\waterways.gpkg' \r\n#>   using driver `GPKG'\r\n#> Simple feature collection with 5 features and 2 fields\r\n#> Geometry type: LINESTRING\r\n#> Dimension:     XY\r\n#> Bounding box:  xmin: 77.31519 ymin: 30.74097 xmax: 77.62827 ymax: 30.96009\r\n#> Geodetic CRS:  WGS 84\r\n\r\nShow code\r\n\r\nhighways <- st_read(\"data/highways.gpkg\")\r\n\r\n\r\n#> Reading layer `highways' from data source \r\n#>   `D:\\R\\abhikumar86.github.io\\_posts\\2021-10-27-churdhar-wls\\data\\highways.gpkg' \r\n#>   using driver `GPKG'\r\n#> Simple feature collection with 15 features and 1 field\r\n#> Geometry type: LINESTRING\r\n#> Dimension:     XY\r\n#> Bounding box:  xmin: 77.32344 ymin: 30.78932 xmax: 77.55692 ymax: 30.94795\r\n#> Geodetic CRS:  WGS 84\r\n\r\nShow code\r\n\r\n\r\n## add hillshade\r\ntm_shape(hill_shade) + \r\n  tm_raster(palette = \"-Greys\", n = 100, style = \"cont\", legend.show = FALSE) +\r\n  \r\n  # add graticule\r\n  tm_graticules(lwd = 1.5, col = \"grey75\", labels.size = 0.85, alpha = 0.5) + \r\n  \r\n  \r\n  # add protected areas\r\n  tm_shape(churdhar_wls) + tm_fill(col = \"green\", alpha = 0.3) + \r\n  tm_borders(col = \"seagreen\", lwd = 2) +\r\n    \r\n  ## add rivers and streams\r\n  tm_shape(waterways) + tm_lines(col = \"dodgerblue\", lwd = 4) +\r\n  \r\n  ## add major roads\r\n  tm_shape(highways) + tm_lines(col = \"lightyellow\", lwd = 2.5) +\r\n    \r\n  ## add legend\r\n  tm_add_legend(type = \"fill\", labels = \"Protected area\", col = \"green2\",\r\n                alpha = 0.4, border.col = \"seagreen\") +\r\n  tm_add_legend(type = \"line\", labels = \"Roads\", col = \"lightyellow\", \r\n                lwd = 2.5) +\r\n  tm_add_legend(type = \"line\", labels = \"Rivers\", col = \"dodgerblue\", lwd = 4) +\r\n    \r\n    \r\n  ## add compass and scale bar\r\n  tm_compass(position = c(0.88, 0.86), size = 2.5, bg.color = \"grey90\", \r\n               bg.alpha = 0.7) +\r\n  tm_scale_bar(position = c(0.04, 0.01), breaks = c(0, 2.5, 5), text.size = 0.75,\r\n                 bg.color = \"grey90\", bg.alpha = 0.7) +\r\n    \r\n  ## adjust layout\r\n  tm_layout(frame.double.line = T, compass.type = \"arrow\", \r\n            legend.position = c(0.015, 0.78), legend.bg.color = \"grey90\", \r\n            legend.bg.alpha = 0.7, \r\n            main.title.position = \"center\",\r\n            legend.text.size = 0.85) \r\n\r\n\r\n\r\n\r\nClimate\r\nVegetation\r\n\r\n\r\nShow code\r\n\r\nrbind(\r\n  c(\"Abies pindrow\", \"Pinaceae\", \"Gymnosperm\", \"Tree\", \"@Thakur2021\"),\r\n  c(\"Abies spectabilis\", \"Pinaceae\", \"Gymnosperm\", \"Tree\", \"@Thakur2021\"),  \r\n  c(\"Acer caesium\", \"Sapindaceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"), \r\n  c(\"Acer pentapomicum\", \"Sapindaceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),  \r\n  c(\"Ailanthus altissima\", \"Simaroubaceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),\r\n  c(\"Alnus nepalensis\", \"Betulaceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),\r\n  c(\"Betula utilis\", \"Betulaceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),  \r\n  c(\"Buxus wallichiana\", \"Buxaceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),\r\n  c(\"Euonymus lucidus\", \"Celastraceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),\r\n  c(\"Ficus palmata\", \"Moraceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),  \r\n  c(\"Juglans regia\", \"Juglandaceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),\r\n  c(\"Lyonia ovalifolia\", \"Ericaceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),\r\n  c(\"Neolitsea pallens\", \"Lauraceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),\r\n  c(\"Picea smithiana\", \"Pinaceae\", \"Gymnosperm\", \"Tree\", \"@Thakur2021\"),\r\n  c(\"Prunus cerasoides\", \"Rosaceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),\r\n  c(\"Prunus cornuta\", \"Rosaceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),\r\n  c(\"Pyrus pashia\", \"Rosaceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),\r\n  c(\"Rhododendron arboreum\", \"Ericaceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),  \r\n  c(\"Quercus floribunda\", \"Fagaceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),\r\n  c(\"Quercus leucotrichophora\", \"Fagaceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),\r\n  c(\"Quercus semecarpifolia\", \"Fagaceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"), \r\n  c(\"Syringa emodi\", \"Oleaceae\", \"Angiosperm\", \"Tree\", \"@Thakur2021\"),\r\n  c(\"Taxus wallichiana\", \"Taxaceae\", \"Gymnosperm\", \"Tree\", \"@Thakur2021\")\r\n  ) |>\r\n  as.data.frame() |> \r\n  knitr::kable(caption = \"Flora of Churdhar Wildlife Sanctuary\",\r\n               col.names = c(\"Botanical Name\", \"Family\", \"Clade\", \"Habit\", \r\n                             \"Reference\"))\r\n\r\n\r\nTable 1: Flora of Churdhar Wildlife Sanctuary\r\nBotanical Name\r\nFamily\r\nClade\r\nHabit\r\nReference\r\nAbies pindrow\r\nPinaceae\r\nGymnosperm\r\nTree\r\nThakur et al. (2021)\r\nAbies spectabilis\r\nPinaceae\r\nGymnosperm\r\nTree\r\nThakur et al. (2021)\r\nAcer caesium\r\nSapindaceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nAcer pentapomicum\r\nSapindaceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nAilanthus altissima\r\nSimaroubaceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nAlnus nepalensis\r\nBetulaceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nBetula utilis\r\nBetulaceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nBuxus wallichiana\r\nBuxaceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nEuonymus lucidus\r\nCelastraceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nFicus palmata\r\nMoraceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nJuglans regia\r\nJuglandaceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nLyonia ovalifolia\r\nEricaceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nNeolitsea pallens\r\nLauraceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nPicea smithiana\r\nPinaceae\r\nGymnosperm\r\nTree\r\nThakur et al. (2021)\r\nPrunus cerasoides\r\nRosaceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nPrunus cornuta\r\nRosaceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nPyrus pashia\r\nRosaceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nRhododendron arboreum\r\nEricaceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nQuercus floribunda\r\nFagaceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nQuercus leucotrichophora\r\nFagaceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nQuercus semecarpifolia\r\nFagaceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nSyringa emodi\r\nOleaceae\r\nAngiosperm\r\nTree\r\nThakur et al. (2021)\r\nTaxus wallichiana\r\nTaxaceae\r\nGymnosperm\r\nTree\r\nThakur et al. (2021)\r\n\r\nhttp://www.bbmanthan.in/wp-content/uploads/2021/02/Manthan13_1ritesh.et_.al_.pdf\r\nhttps://link.springer.com/content/pdf/10.1007/s11629-020-6401-z.pdf\r\nhttps://threatenedtaxa.org/index.php/JoTT/article/view/1619\r\n\r\n\r\n\r\n\r\nThakur, Usha, Narendra Singh Bisht, Munesh Kumar, and Amit Kumar. 2021. “Influence of Altitude on Diversity and Distribution Pattern of Trees in Himalayan Temperate Forests of Churdhar Wildlife Sanctuary, India” 232 (5). https://doi.org/10.1007/s11270-021-05162-8.\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-10-27-churdhar-wls/churdhar-wls_files/figure-html5/unnamed-chunk-3-1.svg",
    "last_modified": "2021-11-10T18:15:57+05:30",
    "input_file": "churdhar-wls.knit.md"
  },
  {
    "path": "posts/2021-10-18-lst/",
    "title": "Land Surface Temperature",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Abhishek Kumar",
        "url": "https://akumar.netlify.app/"
      }
    ],
    "date": "2021-10-18",
    "categories": [
      "R",
      "LST",
      "MODIS",
      "rgee",
      "time series"
    ],
    "contents": "\r\n\r\nContents\r\nAbstract\r\nIntroduction\r\nMethods\r\nResults\r\nTime series analysis\r\nDiscussions\r\nConclusion\r\nAuthors’ contribution\r\n\r\n\r\n\r\nShow code\r\n\r\nlibrary(bfast)       # change detection algorithms\r\nlibrary(lubridate)   # handlingdate object\r\nlibrary(osmdata)     # spatial data extraction\r\nlibrary(raster)      # raster data\r\nlibrary(rgee)\r\nlibrary(sf)\r\nlibrary(tidyverse)\r\nlibrary(tmap)\r\n\r\n#knitr::write_bib(x = c(.packages(), \"distill\"), \"packages.bib\")\r\n\r\n\r\n\r\nTheoretical and Applied Climatology (3.179)\r\nAbstract\r\nIntroduction\r\nThe factors affecting LST are complex. latitude, altitude, the NDVI (normalized differential vegetation index), SM (soil moisture), AOD (aerosol optical depth), cloud fraction and atmospheric WV (water vapor), to analyze the driving factors of spatial differences in LST.\r\nclimate change India https://doi.org/10.1007/978-981-15-4327-2\r\nhttps://public.wmo.int/en/our-mandate/climate/wmo-statement-state-of-global-climate\r\nhttps://doi.org/10.1016/j.rse.2012.12.008\r\nMethods\r\nStudy Site\r\n\r\n\r\n\r\nlocation\r\nelevation\r\nclimate\r\nbiodiversity\r\nKhol Hi Raitan Wildlife Sanctuary\r\n\r\n\r\nShow code\r\n\r\n## extract boundaries and data from OpenStreetMap\r\nlibrary(osmdata)\r\n\r\n## define a bounding box for area of interest\r\nosm_bbox <- c(76.8, 30.6, 77.1, 30.9) # xmin, ymin, xmax, ymax\r\n\r\n## extract boundary of the protected area as sf from OpenStreetMap (osm)\r\nprotected_areas <- opq(osm_bbox) |>\r\n  add_osm_feature(key = \"boundary\", value = \"protected_area\", value_exact = F) |>\r\n  osmdata_sf()\r\n\r\n## rename protected areas to short names and save to local file as gpkg\r\nprotected_areas$osm_polygons |> select(name, geometry) |>\r\n  mutate(short_name = c(\"MH\", \"BS\", \"SL\")) |>\r\n  st_write(\"data/protected_areas.gpkg\")\r\n\r\n## extract rivers / streams (waterways) from osm as sf\r\nwaterways <- opq(osm_bbox) |> add_osm_feature(key = \"waterway\") |> \r\n  osmdata_sf()\r\n\r\n## save waterways to local file as gpkg\r\nwaterways$osm_lines |> select(name, waterway, geometry) |> \r\n  st_write(\"data/waterways.gpkg\")\r\n\r\n## extract roadways (highway) major roads from osm as sf\r\nhighways <- opq(osm_bbox) |> add_osm_feature(key = \"highway\") |> \r\n  osmdata_sf()\r\n\r\n## save roadways to local file as gpkg\r\nhighways$osm_lines |> select(name, highway, geometry) |> \r\n  st_write(\"data/highways.gpkg\")\r\n\r\n## load, merge, and crop pre-downloaded SRTM 30 m elevation data \r\nelev <- raster(\"D:/spatial-data/dem/n30_e076_1arc_v3.tif\") |>\r\n  merge(raster(\"D:/spatial-data/dem/n30_e077_1arc_v3.tif\")) |> \r\n  crop(extent(76.85, 77.01, 30.66, 30.75)) # morni hills wls\r\n\r\n## prepare and save boundaries for elevation bands\r\nmasked_elev <- elev |> mask(mwls)\r\nreclass_matrix <- matrix(data = c(300, 400, 1, \r\n                                  400, 500, 2, \r\n                                  500, 600, 3, \r\n                                  600, 700, 4, \r\n                                  700, 800, 5), \r\n                         ncol = 3, byrow = T)\r\nmasked_elev |> reclassify(rcl = reclass_matrix) |>\r\n  rasterToPolygons(dissolve = T) |> st_as_sf() |> \r\n  mutate(elev_zone = c(\"301-400\", \"401-500\", \"501-600\", \"601-700\", \"701-800\")) |>\r\n  st_write(\"data/elev_band.gpkg\")\r\n\r\n## prepare and save hillshade\r\nhillShade(\r\n  # extract slope from elevation\r\n  slope = terrain(elev, opt= \"slope\"),\r\n  \r\n  # extract aspect from elevation\r\n  aspect = terrain(elev, opt= \"aspect\"), \r\n  \r\n  # 45 altitude angle and 315 azimuth angle\r\n  angle = 45, direction = 315) |> \r\n    writeRaster(\"data/hill_shade.tif\")\r\n\r\n\r\n\r\n\r\n\r\nShow code\r\n\r\n## add hillshade\r\ntm_shape(hill_shade) + \r\n    tm_raster(palette = \"-Greys\", n = 100, style = \"cont\", legend.show = FALSE) +\r\n    \r\n    tm_graticules(lwd = 1.5, col = \"grey75\", labels.size = 0.85) +  \r\n    \r\n  ## add elevation bands\r\n    tm_shape(elev_band) + tm_fill(col = \"elev_zone\", alpha = 0.7, palette = \"Greens\",\r\n                                 title = \"Elevation (m)\") + \r\n    \r\n    ## add boundary of protected area\r\n  tm_shape(mwls) + tm_borders(col = \"seagreen\", lwd = 2.5) +\r\n    \r\n    ## add rivers and streams\r\n  tm_shape(rivers) + tm_lines(col = \"#9bbff4\", lwd = 6) +\r\n  tm_shape(streams) + tm_lines(col = \"#9bbff4\", lwd = 3) +\r\n  \r\n  ## add major roads\r\n  tm_shape(tertiary_roads) + tm_lines(col = \"white\", lwd = 1.5) +\r\n  tm_shape(secondary_roads) + tm_lines(col = \"white\", lwd = 3) +\r\n  tm_shape(trunk_roads) + tm_lines(col = \"white\", lwd = 4) +\r\n  \r\n    ## add legend\r\n  tm_add_legend(type = \"line\", labels = \"Roads\", col = \"white\", \r\n                lwd = 4) +\r\n    tm_add_legend(type = \"line\", labels = \"Rivers\", col = \"skyblue\", lwd = 4) +\r\n    \r\n    \r\n    ## add compass and scale bar\r\n  tm_compass(position = c(0.89, 0.84), size = 2.5, bg.color = \"grey90\", \r\n             bg.alpha = 0.7) +\r\n  tm_scale_bar(position = c(0.26, 0.001), breaks = c(0, 5, 10), text.size = 0.75) +\r\n    \r\n    \r\n    ## adjust layout\r\n  tm_layout(frame.double.line = T, compass.type = \"arrow\", \r\n            legend.position = c(0.015, 0.015), legend.bg.color = \"grey90\", \r\n            legend.bg.alpha = 0.7, \r\n            main.title = \"Khol Hi Raitan (Morni Hills) Wildlife Sanctuary\",\r\n            main.title.position = \"center\",\r\n            legend.text.size = 0.85) \r\n\r\n\r\n\r\n\r\nFigure 1: Location and topography of Khol Hi Raitan Wildlife Sanctuary. The map is prepared in R programming environment using the package tmap (Tennekes 2018)\r\n\r\n\r\n\r\nShow code\r\n\r\n\r\n## remove all variables from the environment\r\nrm(list = ls())\r\n\r\n\r\n\r\nSatellite data\r\nLand surface temperature (LST) data derived from the Moderate Resolution Imaging Spectro-radiometer (MODIS) instrument mounted on Terra satellite. MODIS has 36 spectral bands. The terra satellite was launched in 1999 and it has transit time 10:30 am. MODIS inversely generates LST by using information from middle infrared and thermal infrared bands.\r\nThe generalized split window method and day/night method are the official inversion algorithms of MODIS LST data at present. Through many verification analyses and improvements, the average precision of LST inversion for these two algorithms is approximately 1 K. MODIS LST data have been widely used in many fields, such as climate change, water cycles, environmental assessment and agricultural production, due to the good temporal and spatial resolution and wide coverage. The MOD11C3 LST products are inverted by the day/night method and obtained by projection, splicing, re-sampling and average synthesis. https://doi.org/10.1038/s41598-020-63701-5.\r\nThe MOD11A1 Version 6 product provides daily per-pixel Land Surface Temperature and Emissivity (LST&E) with 1 kilometer (km) spatial resolution in a 1,200 by 1,200 km grid. The pixel temperature value is derived from the MOD11_L2 swath product. Above 30 degrees latitude, some pixels may have multiple observations where the criteria for clear-sky are met. When this occurs, the pixel value is a result of the average of all qualifying observations. Provided along with the daytime and nighttime surface temperature bands are associated quality control assessments, observation times, view zenith angles, and clear-sky coverages along with bands 31 and 32 emissivities from land cover types.\r\nData product: MOD11A1.006 Terra Land Surface Temperature and Emissivity Daily Global 1km (Wan, Hook, and Hulley 2015)\r\nThis dataset represents an 8-day composite of 1-2 day observation intervals, with spatial resolution of 1000 m. Data are available from March 5, 2000 to present.\r\nsummary of images used\r\n\r\n\r\nShow code\r\n\r\n## initialise the earth engine \r\nee_Initialize()\r\n\r\n## read the are of interest and convert to ee object\r\nmwls <- st_read(\"data/elev_band.gpkg\") |> sf_as_ee()\r\n\r\n## load the modis lst data\r\nmodis_lst <- ee$ImageCollection(\"MODIS/006/MOD11A2\")$\r\n    \r\n    ## filter dates\r\n    filterDate(ee$DateRange(\"2001-01-01\", \"2021-01-01\"))$\r\n    \r\n    ## select the LST band\r\n    select(\"LST_Day_1km\")\r\n\r\n## define a function to convert Kelvin to Celcius and get dates for each image\r\nmodC <- modis_lst$map(\r\n  function(image){\r\n    return(\r\n        image$multiply(0.02)$\r\n        subtract(273.15)$\r\n        select(\"LST_Day_1km\")$\r\n        copyProperties(image, image$propertyNames())\r\n        )\r\n  }\r\n)\r\n\r\n## Extract pixel values for each elevation band from each image\r\nroi_lst <- ee_extract(modC, mwls)\r\n\r\n## Reshape the data to longer format and convert dates strings to date format\r\nroi_long <- roi_lst |> \r\n    pivot_longer(cols = -c(elev_zone, layer), names_to = \"date\", \r\n                 values_to = \"lst\") |>\r\n    ## select characters 2 to 11 from the date\r\n    mutate(date = str_sub(date, 2, 11))\r\n\r\n## save to local file for further analysis    \r\nwrite.csv(roi_long, \"data/mwls_modis_lst.csv\")\r\n\r\n\r\n\r\nterrain extraction: We extracted the terrain factors, including the elevation, slope, and aspect and a shaded relief map, from the DEM data.We extracted the terrain factors, including the elevation, slope, and aspect and a shaded relief map, from the DEM data.\r\nLST inversion. Te radiative transfer model.\r\nsurface emissivity\r\nInterference removal.\r\nAccuracy verification of the LST inversion results\r\nProcessing\r\nStatistical analysis\r\ncorrelation\r\nmultiple regression\r\nSen’s slope\r\nTheil-Sen Approach (TSA)\r\nMann–Kendall\r\nTime series forecasting\r\nARIMA, Support vector machines (SVMs)\r\nResults\r\n\r\n\r\nShow code\r\n\r\n## read the previously extracted LST data\r\nlst <- read.csv(\"data/mwls_modis_lst.csv\") |>\r\n    \r\n    ## convert to date column to Date object\r\n    mutate(date = lubridate::as_date(date, format = \"%Y_%m_%d\")) |>\r\n    \r\n    ## separate year and months from the date\r\n    mutate(year = lubridate::year(date), \r\n           month = lubridate::month(date, label = T)) |>\r\n    \r\n    ## select all columsn except layer\r\n    select(-layer)\r\n\r\nlst |> head() |> gt::gt()\r\n\r\n\r\n\r\nhtml {\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\r\n}\r\n\r\n#bzzredmpqd .gt_table {\r\n  display: table;\r\n  border-collapse: collapse;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  color: #333333;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  font-style: normal;\r\n  background-color: #FFFFFF;\r\n  width: auto;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #A8A8A8;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #A8A8A8;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n}\r\n\r\n#bzzredmpqd .gt_heading {\r\n  background-color: #FFFFFF;\r\n  text-align: center;\r\n  border-bottom-color: #FFFFFF;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#bzzredmpqd .gt_title {\r\n  color: #333333;\r\n  font-size: 125%;\r\n  font-weight: initial;\r\n  padding-top: 4px;\r\n  padding-bottom: 4px;\r\n  border-bottom-color: #FFFFFF;\r\n  border-bottom-width: 0;\r\n}\r\n\r\n#bzzredmpqd .gt_subtitle {\r\n  color: #333333;\r\n  font-size: 85%;\r\n  font-weight: initial;\r\n  padding-top: 0;\r\n  padding-bottom: 6px;\r\n  border-top-color: #FFFFFF;\r\n  border-top-width: 0;\r\n}\r\n\r\n#bzzredmpqd .gt_bottom_border {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#bzzredmpqd .gt_col_headings {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#bzzredmpqd .gt_col_heading {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#bzzredmpqd .gt_column_spanner_outer {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  padding-left: 4px;\r\n  padding-right: 4px;\r\n}\r\n\r\n#bzzredmpqd .gt_column_spanner_outer:first-child {\r\n  padding-left: 0;\r\n}\r\n\r\n#bzzredmpqd .gt_column_spanner_outer:last-child {\r\n  padding-right: 0;\r\n}\r\n\r\n#bzzredmpqd .gt_column_spanner {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n  overflow-x: hidden;\r\n  display: inline-block;\r\n  width: 100%;\r\n}\r\n\r\n#bzzredmpqd .gt_group_heading {\r\n  padding: 8px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#bzzredmpqd .gt_empty_group_heading {\r\n  padding: 0.5px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#bzzredmpqd .gt_from_md > :first-child {\r\n  margin-top: 0;\r\n}\r\n\r\n#bzzredmpqd .gt_from_md > :last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n#bzzredmpqd .gt_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  margin: 10px;\r\n  border-top-style: solid;\r\n  border-top-width: 1px;\r\n  border-top-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#bzzredmpqd .gt_stub {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-right-style: solid;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  padding-left: 12px;\r\n}\r\n\r\n#bzzredmpqd .gt_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#bzzredmpqd .gt_first_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#bzzredmpqd .gt_grand_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#bzzredmpqd .gt_first_grand_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: double;\r\n  border-top-width: 6px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#bzzredmpqd .gt_striped {\r\n  background-color: rgba(128, 128, 128, 0.05);\r\n}\r\n\r\n#bzzredmpqd .gt_table_body {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#bzzredmpqd .gt_footnotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#bzzredmpqd .gt_footnote {\r\n  margin: 0px;\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#bzzredmpqd .gt_sourcenotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#bzzredmpqd .gt_sourcenote {\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#bzzredmpqd .gt_left {\r\n  text-align: left;\r\n}\r\n\r\n#bzzredmpqd .gt_center {\r\n  text-align: center;\r\n}\r\n\r\n#bzzredmpqd .gt_right {\r\n  text-align: right;\r\n  font-variant-numeric: tabular-nums;\r\n}\r\n\r\n#bzzredmpqd .gt_font_normal {\r\n  font-weight: normal;\r\n}\r\n\r\n#bzzredmpqd .gt_font_bold {\r\n  font-weight: bold;\r\n}\r\n\r\n#bzzredmpqd .gt_font_italic {\r\n  font-style: italic;\r\n}\r\n\r\n#bzzredmpqd .gt_super {\r\n  font-size: 65%;\r\n}\r\n\r\n#bzzredmpqd .gt_footnote_marks {\r\n  font-style: italic;\r\n  font-weight: normal;\r\n  font-size: 65%;\r\n}\r\nX\r\n      elev_zone\r\n      date\r\n      lst\r\n      year\r\n      month\r\n    1\r\n301-400\r\n2001-01-01\r\n15.21948\r\n2001\r\nJan2\r\n301-400\r\n2001-01-09\r\n12.74996\r\n2001\r\nJan3\r\n301-400\r\n2001-01-17\r\n19.48637\r\n2001\r\nJan4\r\n301-400\r\n2001-01-25\r\n22.93128\r\n2001\r\nJan5\r\n301-400\r\n2001-02-02\r\n22.66557\r\n2001\r\nFeb6\r\n301-400\r\n2001-02-10\r\n24.59091\r\n2001\r\nFeb\r\n\r\n\r\n\r\nShow code\r\n\r\n## Overall simple regression\r\nggplot(data = lst, aes(x = date, y = lst)) +\r\n    geom_point(size = 3.5, alpha = 0.5, color = \"grey90\") +\r\n    geom_line(color = \"grey85\") +\r\n    geom_smooth(alpha = 0.2) +\r\n    ggpubr::stat_cor(show.legend = F, label.y = 52, p.accuracy = 0.001, \r\n                     r.accuracy = 0.01, color = \"black\") +\r\n    ggpubr::stat_regline_equation(label.y = 48) +\r\n    ylim(0, 55) +\r\n    theme_light()    \r\n\r\n\r\n\r\n\r\nFigure 2: Overall simple linear regression for LST\r\n\r\n\r\n\r\n\r\n\r\nShow code\r\n\r\n## simple linear regression\r\nggplot(data = lst, aes(x = date, y = lst)) +\r\n    geom_point(size = 3.5, alpha = 0.5, color = \"grey90\") +\r\n    geom_line(color = \"grey85\") +\r\n    geom_smooth(alpha = 0.2) +\r\n    facet_wrap(.~month) +\r\n    ggpubr::stat_cor(show.legend = F, label.y = 52, p.accuracy = 0.001, \r\n                     r.accuracy = 0.01, color = \"black\") +\r\n    ggpubr::stat_regline_equation(label.y = 5) +\r\n    ylim(0, 55) +\r\n    theme_light()\r\n\r\n\r\n\r\n\r\nFigure 3: Monthly trend for LST\r\n\r\n\r\n\r\n\r\n\r\nShow code\r\n\r\nlst |> drop_na() |> group_by(year) |> \r\n  summarise(avg_lst = mean(lst), max_lst = max(lst), min_lst = min(lst)) |>\r\n  pivot_longer(cols = -year, names_to = \"vars\", values_to = \"lst\") |>\r\n  ggplot(aes(x = year, y = lst, color = vars)) +\r\n  geom_point(size = 3.5) +\r\n  geom_smooth(aes(fill = vars), method = \"lm\", alpha = 0.1) +\r\n  ggpubr::stat_cor(show.legend = F, p.accuracy = 0.001, label.y = c(35, 55, 8),\r\n                     r.accuracy = 0.01) +\r\n  ggpubr::stat_regline_equation(show.legend = F, label.y = c(32, 52, 5)) +\r\n  ylim(5, 55) +\r\n  theme_bw()\r\n\r\n\r\n\r\n\r\nFigure 4: Annual trends of LST\r\n\r\n\r\n\r\n\r\n\r\nShow code\r\n\r\npar(mfrow=c(3,1))\r\nboxplot(lst ~ year, data = lst, cex = 1.2)\r\nboxplot(lst ~ month, data = lst)\r\nboxplot(lst ~ elev_zone, data = lst)\r\n\r\n\r\n\r\n\r\nFigure 5: Variation in LST for year, month and elevation zones\r\n\r\n\r\n\r\nTime series analysis\r\n\r\n\r\nShow code\r\n\r\n\r\n## calculate monthly average LST for each year\r\nmonthly_avg_lst <- lst |> drop_na() |> \r\n    group_by(year, month) |> \r\n    summarise(avg_lst = mean(lst))\r\n\r\n## create a monthly ndvi time series object, frequency = 12 for 12 months\r\nlst_ts <- ts(monthly_avg_lst$avg_lst, start = c(2001, 1), end = c(2020, 12), \r\n             frequency = 12)\r\n\r\npar(mfrow = c(2, 1))\r\n# classical seasonal decomposition by moving averages\r\nlst_ts |> decompose() |> plot()\r\n\r\n\r\n\r\n\r\nFigure 6: Time series decomposition for LST\r\n\r\n\r\n\r\nShow code\r\n\r\n\r\n# seasonal decomposition of time series by loess\r\nlst_ts |> stl(s.window = \"periodic\") |> plot()\r\n\r\n\r\n\r\n\r\nFigure 7: Time series decomposition for LST\r\n\r\n\r\n\r\n\r\n\r\nShow code\r\n\r\nlibrary(bfast)\r\n\r\n## BFAST algorithm for break\r\nlst_ts |> bfast01() |> plot()\r\n\r\n\r\n\r\n\r\nFigure 8: Change point detection using bfast\r\n\r\n\r\n\r\n\r\n\r\nShow code\r\n\r\n## classify the break\r\nlst_ts |> bfast01() |> bfast01classify() |> gt::gt(caption = \"Classification of breakpoint\")\r\n\r\n\r\n\r\nhtml {\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\r\n}\r\n\r\n#iouuxanoaw .gt_table {\r\n  display: table;\r\n  border-collapse: collapse;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  color: #333333;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  font-style: normal;\r\n  background-color: #FFFFFF;\r\n  width: auto;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #A8A8A8;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #A8A8A8;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n}\r\n\r\n#iouuxanoaw .gt_heading {\r\n  background-color: #FFFFFF;\r\n  text-align: center;\r\n  border-bottom-color: #FFFFFF;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#iouuxanoaw .gt_title {\r\n  color: #333333;\r\n  font-size: 125%;\r\n  font-weight: initial;\r\n  padding-top: 4px;\r\n  padding-bottom: 4px;\r\n  border-bottom-color: #FFFFFF;\r\n  border-bottom-width: 0;\r\n}\r\n\r\n#iouuxanoaw .gt_subtitle {\r\n  color: #333333;\r\n  font-size: 85%;\r\n  font-weight: initial;\r\n  padding-top: 0;\r\n  padding-bottom: 6px;\r\n  border-top-color: #FFFFFF;\r\n  border-top-width: 0;\r\n}\r\n\r\n#iouuxanoaw .gt_bottom_border {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#iouuxanoaw .gt_col_headings {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#iouuxanoaw .gt_col_heading {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#iouuxanoaw .gt_column_spanner_outer {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  padding-left: 4px;\r\n  padding-right: 4px;\r\n}\r\n\r\n#iouuxanoaw .gt_column_spanner_outer:first-child {\r\n  padding-left: 0;\r\n}\r\n\r\n#iouuxanoaw .gt_column_spanner_outer:last-child {\r\n  padding-right: 0;\r\n}\r\n\r\n#iouuxanoaw .gt_column_spanner {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n  overflow-x: hidden;\r\n  display: inline-block;\r\n  width: 100%;\r\n}\r\n\r\n#iouuxanoaw .gt_group_heading {\r\n  padding: 8px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#iouuxanoaw .gt_empty_group_heading {\r\n  padding: 0.5px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#iouuxanoaw .gt_from_md > :first-child {\r\n  margin-top: 0;\r\n}\r\n\r\n#iouuxanoaw .gt_from_md > :last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n#iouuxanoaw .gt_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  margin: 10px;\r\n  border-top-style: solid;\r\n  border-top-width: 1px;\r\n  border-top-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#iouuxanoaw .gt_stub {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-right-style: solid;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  padding-left: 12px;\r\n}\r\n\r\n#iouuxanoaw .gt_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#iouuxanoaw .gt_first_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#iouuxanoaw .gt_grand_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#iouuxanoaw .gt_first_grand_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: double;\r\n  border-top-width: 6px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#iouuxanoaw .gt_striped {\r\n  background-color: rgba(128, 128, 128, 0.05);\r\n}\r\n\r\n#iouuxanoaw .gt_table_body {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#iouuxanoaw .gt_footnotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#iouuxanoaw .gt_footnote {\r\n  margin: 0px;\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#iouuxanoaw .gt_sourcenotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#iouuxanoaw .gt_sourcenote {\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#iouuxanoaw .gt_left {\r\n  text-align: left;\r\n}\r\n\r\n#iouuxanoaw .gt_center {\r\n  text-align: center;\r\n}\r\n\r\n#iouuxanoaw .gt_right {\r\n  text-align: right;\r\n  font-variant-numeric: tabular-nums;\r\n}\r\n\r\n#iouuxanoaw .gt_font_normal {\r\n  font-weight: normal;\r\n}\r\n\r\n#iouuxanoaw .gt_font_bold {\r\n  font-weight: bold;\r\n}\r\n\r\n#iouuxanoaw .gt_font_italic {\r\n  font-style: italic;\r\n}\r\n\r\n#iouuxanoaw .gt_super {\r\n  font-size: 65%;\r\n}\r\n\r\n#iouuxanoaw .gt_footnote_marks {\r\n  font-style: italic;\r\n  font-weight: normal;\r\n  font-size: 65%;\r\n}\r\nTable 1: Classification of breakpoint\r\n  \r\n  flag_type\r\n      flag_significance\r\n      p_segment1\r\n      p_segment2\r\n      pct_segment1\r\n      pct_segment2\r\n      flag_pct_stable\r\n    5\r\n1\r\n0.01475315\r\n0.1348009\r\n0.4952384\r\n0.2477474\r\nNA\r\n\r\n\r\n\r\nShow code\r\n\r\n## detecting all breaks\r\nlst_ts |> bfast(formula = response ~ trend + harmon, order = 3, breaks = \"BIC\") |> \r\n    plot()\r\n\r\n\r\n\r\n\r\nFigure 9: Iterative breakpoint detection\r\n\r\n\r\n#> NULL\r\n\r\n\r\n\r\nShow code\r\n\r\nlst_ts |> bfastmonitor(start = 2015, formula = response ~ trend + harmon) |> \r\n  plot(ylim = c(-7, 45))\r\n\r\n\r\n\r\n\r\nFigure 10: Monitoring changepoint and LST time series\r\n\r\n\r\n\r\n\r\n\r\nShow code\r\n\r\nlst_ts |> bfastlite() |> plot()\r\n\r\n\r\n\r\n\r\nDiscussions\r\nConclusion\r\nAuthors’ contribution\r\nAbhishek Kumar Conceptualisation, Methodology, Software, Validation, Formal Analysis, Investigation, Resources, Data Curation, Writing - Original Draft, Writing - Review & Editing, Visualization, Funding acquisition Meenu Patil Formal Analysis, Writing - Review & Editing, Funding acquisition Anand Narain Singh Supervision, Project administration\r\n\r\n\r\n\r\nTennekes, Martijn. 2018. “Tmap: Thematic Maps in r” 84 (6): 1–39. https://doi.org/10.18637/jss.v084.i06.\r\n\r\n\r\nWan, Zhengming, Simon Hook, and Glynn Hulley. 2015. “Mod11a1 MODIS/Terra Land Surface Temperature/Emissivity Daily L3 Global 1km SIN Grid V006.” NASA EOSDIS Land Processes DAAC. https://doi.org/10.5067/MODIS/MOD11A1.006.\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-10-18-lst/lst_files/figure-html5/fig1-1.svg",
    "last_modified": "2021-11-16T13:08:34+05:30",
    "input_file": "lst.knit.md"
  },
  {
    "path": "posts/2021-10-16-rgee-composites/",
    "title": "Deriving Spectral Indices with Google Earth Engine in R",
    "description": "In this post, I have derived several spectral indices from Sentinel-2 data using Google Earth Engine in R with package rgee.",
    "author": [
      {
        "name": "Abhishek Kumar",
        "url": "https://akumar.netlify.app/"
      }
    ],
    "date": "2021-10-16",
    "categories": [
      "R",
      "rgee",
      "Remote Sensing",
      "Google Earth Engine"
    ],
    "contents": "\r\n\r\nContents\r\nIntroduction\r\nData and Pre-processing\r\nMedian true color composite\r\nMedian false color composite\r\nSpectral Indices\r\n\r\n\r\n\r\nShow code\r\n\r\n## set global options for markdown\r\nknitr::opts_chunk$set(comment = \"#>\", collapse = TRUE, fig.align = 'center',\r\n          fig.width = 7, fig.height = 5, out.width = '90%', dev = \"svglite\",\r\n          echo=T, message=FALSE, warning=FALSE)\r\n\r\n\r\n\r\nIntroduction\r\nGoogle Earth Engine (GEE) is a cloud-based platform for planetary-scale geo-spatial analysis (Gorelick et al. 2017). The cloud-based computation ability overcomes the limitations of data access, data storage, personal limited computation ability and time. Thus, it provides a platform for large scale analysis of earth observations through access to satellite imagery.\r\nGoogle offered support only for Python and JavaScript, and GEE was not accessible to R (R Core Team 2021) users until Aybar et al. (2020) developed rgee package (Aybar 2021).\r\n\r\n\r\nShow code\r\n\r\nlibrary(rgee)\r\nee_Initialize()\r\n\r\n#knitr::write_bib(x = c(.packages(), \"blogdown\"), \"packages.bib\")\r\n\r\n\r\n\r\nData and Pre-processing\r\nData Product: Sentinel-2 MSI: MultiSpectral Instrument, Level-2A\r\nSentinel-2 is a wide-swath, high-resolution, multi-spectral imaging mission supporting Copernicus Land Monitoring studies, including the monitoring of vegetation, soil and water cover, as well as observation of inland waterways and coastal areas. The SENTINEL-2 data contain 13 spectral bands representing TOA reflectance scaled by 10000.\r\n\r\n\r\nShow code\r\n\r\n# define a region of interest\r\nroi <- ee$Geometry$Rectangle(76.85, 30.66, 77.01, 30.75)\r\n\r\n# load and pre-process sentinel-2 data\r\n# Filter the image collection\r\nimg <- ee$ImageCollection(\"COPERNICUS/S2_SR\")$\r\n  \r\n  # filter the date range we are interested in\r\n  filterDate(\"2020-01-01\", \"2020-12-31\")$\r\n  \r\n  # filter geographic area we are interested in \r\n  filterBounds(roi)$\r\n  \r\n  # filter cloud cover less than 20%\r\n  filter(ee$Filter$lt(\"CLOUD_COVERAGE_ASSESSMENT\", 20))$\r\n  \r\n  # filter cloud pixel percentage to less than 20%\r\n  filter(ee$Filter$lt(\"CLOUDY_PIXEL_PERCENTAGE\", 20))$\r\n  \r\n  # reduce image collection by taking median value\r\n  median()$\r\n  \r\n  # clip to region of interest\r\n  clip(roi)\r\n\r\n# print band names\r\nimg$bandNames()$getInfo()\r\n\r\n\r\n#>  [1] \"B1\"         \"B2\"         \"B3\"         \"B4\"         \"B5\"        \r\n#>  [6] \"B6\"         \"B7\"         \"B8\"         \"B8A\"        \"B9\"        \r\n#> [11] \"B11\"        \"B12\"        \"AOT\"        \"WVP\"        \"SCL\"       \r\n#> [16] \"TCI_R\"      \"TCI_G\"      \"TCI_B\"      \"MSK_CLDPRB\" \"MSK_SNWPRB\"\r\n#> [21] \"QA10\"       \"QA20\"       \"QA60\"\r\n\r\nMedian true color composite\r\n\r\n\r\nShow code\r\n\r\nMap$centerObject(roi, 12)\r\nMap$addLayer(img, \r\n             visParams = list(min = 0, max = 3000, bands = c(\"B4\", \"B3\", \"B2\")),\r\n             name = \"true color\")\r\n\r\n\r\n\r\n{\"x\":{\"options\":{\"minZoom\":1,\"maxZoom\":52,\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"preferCanvas\":false,\"bounceAtZoomLimits\":false,\"maxBounds\":[[[-90,-370]],[[90,370]]]},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.Positron\",\"CartoDB.Positron\",\"CartoDB.Positron\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap\",\"OpenStreetMap\",\"OpenStreetMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldImagery\",\"Esri.WorldImagery\",\"Esri.WorldImagery\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenTopoMap\",\"OpenTopoMap\",\"OpenTopoMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],[],{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"addScaleBar\",\"args\":[{\"maxWidth\":100,\"metric\":true,\"imperial\":true,\"updateWhenIdle\":true,\"position\":\"bottomleft\"}]},{\"method\":\"addTiles\",\"args\":[\"https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/3bf64560a41657fd3fdcbc9316ba699f-07af40bbcaddfe9c8a8d5e029d19a810/tiles/{z}/{x}/{y}\",\"true color\",\"true color\",{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],\"true color\",{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"hideGroup\",\"args\":[null]}],\"setView\":[[30.7050175238026,76.9299999999991],12,[]]},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el, x, data) {\\n  return (\\n      function(el, x, data) {\\n      // get the leaflet map\\n      var map = this; //HTMLWidgets.find('#' + el.id);\\n      // we need a new div element because we have to handle\\n      // the mouseover output separately\\n      // debugger;\\n      function addElement () {\\n      // generate new div Element\\n      var newDiv = $(document.createElement('div'));\\n      // append at end of leaflet htmlwidget container\\n      $(el).append(newDiv);\\n      //provide ID and style\\n      newDiv.addClass('lnlt');\\n      newDiv.css({\\n      'position': 'relative',\\n      'bottomleft':  '0px',\\n      'background-color': 'rgba(255, 255, 255, 0.7)',\\n      'box-shadow': '0 0 2px #bbb',\\n      'background-clip': 'padding-box',\\n      'margin': '0',\\n      'padding-left': '5px',\\n      'color': '#333',\\n      'font': '9px/1.5 \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif',\\n      'z-index': '700',\\n      });\\n      return newDiv;\\n      }\\n\\n\\n      // check for already existing lnlt class to not duplicate\\n      var lnlt = $(el).find('.lnlt');\\n\\n      if(!lnlt.length) {\\n      lnlt = addElement();\\n\\n      // grab the special div we generated in the beginning\\n      // and put the mousmove output there\\n\\n      map.on('mousemove', function (e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                           ' | zoom: ' + map.getZoom() +\\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\\n                           ' | epsg: 3857 ' +\\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\\n      } else {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      }\\n      });\\n\\n      // remove the lnlt div when mouse leaves map\\n      map.on('mouseout', function (e) {\\n      var strip = document.querySelector('.lnlt');\\n      if( strip !==null) strip.remove();\\n      });\\n\\n      };\\n\\n      //$(el).keypress(67, function(e) {\\n      map.on('preclick', function(e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      var txt = document.querySelector('.lnlt').textContent;\\n      console.log(txt);\\n      //txt.innerText.focus();\\n      //txt.select();\\n      setClipboardText('\\\"' + txt + '\\\"');\\n      }\\n      });\\n\\n      }\\n      ).call(this.getMap(), el, x, data);\\n}\",\"data\":null},{\"code\":\"function(el, x, data) {\\n  return (function(el,x,data){\\n           var map = this;\\n\\n           map.on('keypress', function(e) {\\n               console.log(e.originalEvent.code);\\n               var key = e.originalEvent.code;\\n               if (key === 'KeyE') {\\n                   var bb = this.getBounds();\\n                   var txt = JSON.stringify(bb);\\n                   console.log(txt);\\n\\n                   setClipboardText('\\\\'' + txt + '\\\\'');\\n               }\\n           })\\n        }).call(this.getMap(), el, x, data);\\n}\",\"data\":null}]}}\r\nMedian false color composite\r\n\r\n\r\nShow code\r\n\r\nMap$centerObject(roi, 12)\r\nMap$addLayer(img, \r\n             visParams = list(min = 0, max = 3000, bands = c(\"B8\", \"B4\", \"B3\")),\r\n             name = \"false color\")\r\n\r\n\r\n\r\n{\"x\":{\"options\":{\"minZoom\":1,\"maxZoom\":52,\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"preferCanvas\":false,\"bounceAtZoomLimits\":false,\"maxBounds\":[[[-90,-370]],[[90,370]]]},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.Positron\",\"CartoDB.Positron\",\"CartoDB.Positron\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap\",\"OpenStreetMap\",\"OpenStreetMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldImagery\",\"Esri.WorldImagery\",\"Esri.WorldImagery\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenTopoMap\",\"OpenTopoMap\",\"OpenTopoMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],[],{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"addScaleBar\",\"args\":[{\"maxWidth\":100,\"metric\":true,\"imperial\":true,\"updateWhenIdle\":true,\"position\":\"bottomleft\"}]},{\"method\":\"addTiles\",\"args\":[\"https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/ea9e75ea5afa4ac45036f7211b1e9684-4689fd53737cd24cd19a27d95df4fc49/tiles/{z}/{x}/{y}\",\"false color\",\"false color\",{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],\"false color\",{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"hideGroup\",\"args\":[null]}],\"setView\":[[30.7050175238026,76.9299999999991],12,[]]},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el, x, data) {\\n  return (\\n      function(el, x, data) {\\n      // get the leaflet map\\n      var map = this; //HTMLWidgets.find('#' + el.id);\\n      // we need a new div element because we have to handle\\n      // the mouseover output separately\\n      // debugger;\\n      function addElement () {\\n      // generate new div Element\\n      var newDiv = $(document.createElement('div'));\\n      // append at end of leaflet htmlwidget container\\n      $(el).append(newDiv);\\n      //provide ID and style\\n      newDiv.addClass('lnlt');\\n      newDiv.css({\\n      'position': 'relative',\\n      'bottomleft':  '0px',\\n      'background-color': 'rgba(255, 255, 255, 0.7)',\\n      'box-shadow': '0 0 2px #bbb',\\n      'background-clip': 'padding-box',\\n      'margin': '0',\\n      'padding-left': '5px',\\n      'color': '#333',\\n      'font': '9px/1.5 \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif',\\n      'z-index': '700',\\n      });\\n      return newDiv;\\n      }\\n\\n\\n      // check for already existing lnlt class to not duplicate\\n      var lnlt = $(el).find('.lnlt');\\n\\n      if(!lnlt.length) {\\n      lnlt = addElement();\\n\\n      // grab the special div we generated in the beginning\\n      // and put the mousmove output there\\n\\n      map.on('mousemove', function (e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                           ' | zoom: ' + map.getZoom() +\\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\\n                           ' | epsg: 3857 ' +\\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\\n      } else {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      }\\n      });\\n\\n      // remove the lnlt div when mouse leaves map\\n      map.on('mouseout', function (e) {\\n      var strip = document.querySelector('.lnlt');\\n      if( strip !==null) strip.remove();\\n      });\\n\\n      };\\n\\n      //$(el).keypress(67, function(e) {\\n      map.on('preclick', function(e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      var txt = document.querySelector('.lnlt').textContent;\\n      console.log(txt);\\n      //txt.innerText.focus();\\n      //txt.select();\\n      setClipboardText('\\\"' + txt + '\\\"');\\n      }\\n      });\\n\\n      }\\n      ).call(this.getMap(), el, x, data);\\n}\",\"data\":null},{\"code\":\"function(el, x, data) {\\n  return (function(el,x,data){\\n           var map = this;\\n\\n           map.on('keypress', function(e) {\\n               console.log(e.originalEvent.code);\\n               var key = e.originalEvent.code;\\n               if (key === 'KeyE') {\\n                   var bb = this.getBounds();\\n                   var txt = JSON.stringify(bb);\\n                   console.log(txt);\\n\\n                   setClipboardText('\\\\'' + txt + '\\\\'');\\n               }\\n           })\\n        }).call(this.getMap(), el, x, data);\\n}\",\"data\":null}]}}\r\nSpectral Indices\r\nVegetation cover\r\nNDVI: Normalized Difference Vegetation Index\r\n\r\n\r\nShow code\r\n\r\n# calculate indices e.g. NDVI\r\nndvi <- img$expression(\r\n  expression = \"(NIR - RED)/(NIR + RED)\",\r\n  opt_map = list(\"RED\" = img$select(\"B4\"),\r\n                 \"NIR\" = img$select(\"B8\")\r\n                 ))$rename(\"ndvi\")\r\n\r\nvis_pal <- c('FFFFFF', 'CE7E45', 'DF923D', 'F1B555', 'FCD163', '99B718', \r\n             '74A901', '66A000', '529400', '3E8601', '207401', '056201',\r\n             '004C00', '023B01', '012E01', '011D01', '011301')\r\n\r\nMap$centerObject(roi, 12)\r\nMap$addLayer(ndvi, \r\n             visParams = list(min = 0, max = 1, palette = vis_pal),\r\n             name = \"NDVI\")\r\n\r\n\r\n\r\n{\"x\":{\"options\":{\"minZoom\":1,\"maxZoom\":52,\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"preferCanvas\":false,\"bounceAtZoomLimits\":false,\"maxBounds\":[[[-90,-370]],[[90,370]]]},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.Positron\",\"CartoDB.Positron\",\"CartoDB.Positron\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap\",\"OpenStreetMap\",\"OpenStreetMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldImagery\",\"Esri.WorldImagery\",\"Esri.WorldImagery\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenTopoMap\",\"OpenTopoMap\",\"OpenTopoMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],[],{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"addScaleBar\",\"args\":[{\"maxWidth\":100,\"metric\":true,\"imperial\":true,\"updateWhenIdle\":true,\"position\":\"bottomleft\"}]},{\"method\":\"addTiles\",\"args\":[\"https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/1e5796eb5c677436ac844607e48b6ba2-47816ade5244a31bc3d853bdfedc6cca/tiles/{z}/{x}/{y}\",\"NDVI\",\"NDVI\",{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],\"NDVI\",{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"hideGroup\",\"args\":[null]}],\"setView\":[[30.7050175238026,76.9299999999991],12,[]]},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el, x, data) {\\n  return (\\n      function(el, x, data) {\\n      // get the leaflet map\\n      var map = this; //HTMLWidgets.find('#' + el.id);\\n      // we need a new div element because we have to handle\\n      // the mouseover output separately\\n      // debugger;\\n      function addElement () {\\n      // generate new div Element\\n      var newDiv = $(document.createElement('div'));\\n      // append at end of leaflet htmlwidget container\\n      $(el).append(newDiv);\\n      //provide ID and style\\n      newDiv.addClass('lnlt');\\n      newDiv.css({\\n      'position': 'relative',\\n      'bottomleft':  '0px',\\n      'background-color': 'rgba(255, 255, 255, 0.7)',\\n      'box-shadow': '0 0 2px #bbb',\\n      'background-clip': 'padding-box',\\n      'margin': '0',\\n      'padding-left': '5px',\\n      'color': '#333',\\n      'font': '9px/1.5 \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif',\\n      'z-index': '700',\\n      });\\n      return newDiv;\\n      }\\n\\n\\n      // check for already existing lnlt class to not duplicate\\n      var lnlt = $(el).find('.lnlt');\\n\\n      if(!lnlt.length) {\\n      lnlt = addElement();\\n\\n      // grab the special div we generated in the beginning\\n      // and put the mousmove output there\\n\\n      map.on('mousemove', function (e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                           ' | zoom: ' + map.getZoom() +\\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\\n                           ' | epsg: 3857 ' +\\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\\n      } else {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      }\\n      });\\n\\n      // remove the lnlt div when mouse leaves map\\n      map.on('mouseout', function (e) {\\n      var strip = document.querySelector('.lnlt');\\n      if( strip !==null) strip.remove();\\n      });\\n\\n      };\\n\\n      //$(el).keypress(67, function(e) {\\n      map.on('preclick', function(e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      var txt = document.querySelector('.lnlt').textContent;\\n      console.log(txt);\\n      //txt.innerText.focus();\\n      //txt.select();\\n      setClipboardText('\\\"' + txt + '\\\"');\\n      }\\n      });\\n\\n      }\\n      ).call(this.getMap(), el, x, data);\\n}\",\"data\":null},{\"code\":\"function(el, x, data) {\\n  return (function(el,x,data){\\n           var map = this;\\n\\n           map.on('keypress', function(e) {\\n               console.log(e.originalEvent.code);\\n               var key = e.originalEvent.code;\\n               if (key === 'KeyE') {\\n                   var bb = this.getBounds();\\n                   var txt = JSON.stringify(bb);\\n                   console.log(txt);\\n\\n                   setClipboardText('\\\\'' + txt + '\\\\'');\\n               }\\n           })\\n        }).call(this.getMap(), el, x, data);\\n}\",\"data\":null}]}}\r\nNDVIre: Normalized Difference Vegetation Index red-edge\r\n\r\n\r\nShow code\r\n\r\nndvire <- img$expression(\r\n  expression = \"(RedEdge1 - RED)/(RedEdge1 + RED)\",\r\n  opt_map = list(\"RED\" = img$select(\"B4\"),\r\n                 \"RedEdge1\" = img$select(\"B5\")\r\n                 ))$rename(\"ndvire\")\r\n\r\nvis_pal <- c('FFFFFF', 'CE7E45', 'DF923D', 'F1B555', 'FCD163', '99B718', \r\n             '74A901', '66A000', '529400', '3E8601', '207401', '056201',\r\n             '004C00', '023B01', '012E01', '011D01', '011301')\r\n\r\nMap$centerObject(roi, 12)\r\nMap$addLayer(ndvire, \r\n             visParams = list(min = 0, max = 1, palette = vis_pal),\r\n             name = \"NDVIre\")\r\n\r\n\r\n\r\n{\"x\":{\"options\":{\"minZoom\":1,\"maxZoom\":52,\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"preferCanvas\":false,\"bounceAtZoomLimits\":false,\"maxBounds\":[[[-90,-370]],[[90,370]]]},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.Positron\",\"CartoDB.Positron\",\"CartoDB.Positron\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap\",\"OpenStreetMap\",\"OpenStreetMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldImagery\",\"Esri.WorldImagery\",\"Esri.WorldImagery\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenTopoMap\",\"OpenTopoMap\",\"OpenTopoMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],[],{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"addScaleBar\",\"args\":[{\"maxWidth\":100,\"metric\":true,\"imperial\":true,\"updateWhenIdle\":true,\"position\":\"bottomleft\"}]},{\"method\":\"addTiles\",\"args\":[\"https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/96f566eddf0477468c084a0323f07d30-0c4f256045dd0d80305cb242bd8fedc9/tiles/{z}/{x}/{y}\",\"NDVIre\",\"NDVIre\",{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],\"NDVIre\",{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"hideGroup\",\"args\":[null]}],\"setView\":[[30.7050175238026,76.9299999999991],12,[]]},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el, x, data) {\\n  return (\\n      function(el, x, data) {\\n      // get the leaflet map\\n      var map = this; //HTMLWidgets.find('#' + el.id);\\n      // we need a new div element because we have to handle\\n      // the mouseover output separately\\n      // debugger;\\n      function addElement () {\\n      // generate new div Element\\n      var newDiv = $(document.createElement('div'));\\n      // append at end of leaflet htmlwidget container\\n      $(el).append(newDiv);\\n      //provide ID and style\\n      newDiv.addClass('lnlt');\\n      newDiv.css({\\n      'position': 'relative',\\n      'bottomleft':  '0px',\\n      'background-color': 'rgba(255, 255, 255, 0.7)',\\n      'box-shadow': '0 0 2px #bbb',\\n      'background-clip': 'padding-box',\\n      'margin': '0',\\n      'padding-left': '5px',\\n      'color': '#333',\\n      'font': '9px/1.5 \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif',\\n      'z-index': '700',\\n      });\\n      return newDiv;\\n      }\\n\\n\\n      // check for already existing lnlt class to not duplicate\\n      var lnlt = $(el).find('.lnlt');\\n\\n      if(!lnlt.length) {\\n      lnlt = addElement();\\n\\n      // grab the special div we generated in the beginning\\n      // and put the mousmove output there\\n\\n      map.on('mousemove', function (e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                           ' | zoom: ' + map.getZoom() +\\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\\n                           ' | epsg: 3857 ' +\\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\\n      } else {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      }\\n      });\\n\\n      // remove the lnlt div when mouse leaves map\\n      map.on('mouseout', function (e) {\\n      var strip = document.querySelector('.lnlt');\\n      if( strip !==null) strip.remove();\\n      });\\n\\n      };\\n\\n      //$(el).keypress(67, function(e) {\\n      map.on('preclick', function(e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      var txt = document.querySelector('.lnlt').textContent;\\n      console.log(txt);\\n      //txt.innerText.focus();\\n      //txt.select();\\n      setClipboardText('\\\"' + txt + '\\\"');\\n      }\\n      });\\n\\n      }\\n      ).call(this.getMap(), el, x, data);\\n}\",\"data\":null},{\"code\":\"function(el, x, data) {\\n  return (function(el,x,data){\\n           var map = this;\\n\\n           map.on('keypress', function(e) {\\n               console.log(e.originalEvent.code);\\n               var key = e.originalEvent.code;\\n               if (key === 'KeyE') {\\n                   var bb = this.getBounds();\\n                   var txt = JSON.stringify(bb);\\n                   console.log(txt);\\n\\n                   setClipboardText('\\\\'' + txt + '\\\\'');\\n               }\\n           })\\n        }).call(this.getMap(), el, x, data);\\n}\",\"data\":null}]}}\r\nEVI: Enhanced vegetation Index\r\n\r\n\r\nShow code\r\n\r\n# calculate EVI\r\nevi <- img$expression(\r\n  expression = \"2.5 * ((NIR - RED) / (NIR + 6 * RED - 7.5 * BLUE + 10000))\",\r\n  opt_map = list(\"BLUE\" = img$select(\"B2\"),\r\n                 \"RED\" = img$select(\"B4\"),\r\n                 \"NIR\" = img$select(\"B8\")\r\n                 ))$rename(\"evi\")\r\n\r\nMap$centerObject(roi, 12)\r\nMap$addLayer(evi, \r\n             visParams = list(palette = vis_pal),\r\n             name = \"EVI\")\r\n\r\n\r\n\r\n{\"x\":{\"options\":{\"minZoom\":1,\"maxZoom\":52,\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"preferCanvas\":false,\"bounceAtZoomLimits\":false,\"maxBounds\":[[[-90,-370]],[[90,370]]]},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.Positron\",\"CartoDB.Positron\",\"CartoDB.Positron\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap\",\"OpenStreetMap\",\"OpenStreetMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldImagery\",\"Esri.WorldImagery\",\"Esri.WorldImagery\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenTopoMap\",\"OpenTopoMap\",\"OpenTopoMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],[],{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"addScaleBar\",\"args\":[{\"maxWidth\":100,\"metric\":true,\"imperial\":true,\"updateWhenIdle\":true,\"position\":\"bottomleft\"}]},{\"method\":\"addTiles\",\"args\":[\"https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/69dbbbaca3b017f98db0a817c3124f4f-a10a6c693e331d5fb040e2e38dc182a0/tiles/{z}/{x}/{y}\",\"EVI\",\"EVI\",{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],\"EVI\",{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"hideGroup\",\"args\":[null]}],\"setView\":[[30.7050175238026,76.9299999999991],12,[]]},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el, x, data) {\\n  return (\\n      function(el, x, data) {\\n      // get the leaflet map\\n      var map = this; //HTMLWidgets.find('#' + el.id);\\n      // we need a new div element because we have to handle\\n      // the mouseover output separately\\n      // debugger;\\n      function addElement () {\\n      // generate new div Element\\n      var newDiv = $(document.createElement('div'));\\n      // append at end of leaflet htmlwidget container\\n      $(el).append(newDiv);\\n      //provide ID and style\\n      newDiv.addClass('lnlt');\\n      newDiv.css({\\n      'position': 'relative',\\n      'bottomleft':  '0px',\\n      'background-color': 'rgba(255, 255, 255, 0.7)',\\n      'box-shadow': '0 0 2px #bbb',\\n      'background-clip': 'padding-box',\\n      'margin': '0',\\n      'padding-left': '5px',\\n      'color': '#333',\\n      'font': '9px/1.5 \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif',\\n      'z-index': '700',\\n      });\\n      return newDiv;\\n      }\\n\\n\\n      // check for already existing lnlt class to not duplicate\\n      var lnlt = $(el).find('.lnlt');\\n\\n      if(!lnlt.length) {\\n      lnlt = addElement();\\n\\n      // grab the special div we generated in the beginning\\n      // and put the mousmove output there\\n\\n      map.on('mousemove', function (e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                           ' | zoom: ' + map.getZoom() +\\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\\n                           ' | epsg: 3857 ' +\\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\\n      } else {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      }\\n      });\\n\\n      // remove the lnlt div when mouse leaves map\\n      map.on('mouseout', function (e) {\\n      var strip = document.querySelector('.lnlt');\\n      if( strip !==null) strip.remove();\\n      });\\n\\n      };\\n\\n      //$(el).keypress(67, function(e) {\\n      map.on('preclick', function(e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      var txt = document.querySelector('.lnlt').textContent;\\n      console.log(txt);\\n      //txt.innerText.focus();\\n      //txt.select();\\n      setClipboardText('\\\"' + txt + '\\\"');\\n      }\\n      });\\n\\n      }\\n      ).call(this.getMap(), el, x, data);\\n}\",\"data\":null},{\"code\":\"function(el, x, data) {\\n  return (function(el,x,data){\\n           var map = this;\\n\\n           map.on('keypress', function(e) {\\n               console.log(e.originalEvent.code);\\n               var key = e.originalEvent.code;\\n               if (key === 'KeyE') {\\n                   var bb = this.getBounds();\\n                   var txt = JSON.stringify(bb);\\n                   console.log(txt);\\n\\n                   setClipboardText('\\\\'' + txt + '\\\\'');\\n               }\\n           })\\n        }).call(this.getMap(), el, x, data);\\n}\",\"data\":null}]}}\r\nSAVI: Soil-adjusted Vegetation Index\r\n\r\n\r\nShow code\r\n\r\nsavi <- img$expression(\r\n  expression = \"((NIR - RED) / (NIR + RED + 0.5)) * 1.5\",\r\n  opt_map = list(\"RED\" = img$select(\"B4\")$multiply(0.0001),\r\n                 \"NIR\" = img$select(\"B8\")$multiply(0.0001)\r\n                 ))$rename(\"savi\")\r\n\r\nMap$centerObject(roi, 12)\r\nMap$addLayer(savi, \r\n             visParams = list(min = 0, max = 0.5, \r\n                              palette = c(\"brown\", \"yellow\", \"green\")),\r\n             name = \"SAVI\")\r\n\r\n\r\n\r\n{\"x\":{\"options\":{\"minZoom\":1,\"maxZoom\":52,\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"preferCanvas\":false,\"bounceAtZoomLimits\":false,\"maxBounds\":[[[-90,-370]],[[90,370]]]},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.Positron\",\"CartoDB.Positron\",\"CartoDB.Positron\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap\",\"OpenStreetMap\",\"OpenStreetMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldImagery\",\"Esri.WorldImagery\",\"Esri.WorldImagery\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenTopoMap\",\"OpenTopoMap\",\"OpenTopoMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],[],{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"addScaleBar\",\"args\":[{\"maxWidth\":100,\"metric\":true,\"imperial\":true,\"updateWhenIdle\":true,\"position\":\"bottomleft\"}]},{\"method\":\"addTiles\",\"args\":[\"https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/09018d7996c6c7f6d000c54ff880f6a1-42e5c13c45738b148a19feb5b689b5ba/tiles/{z}/{x}/{y}\",\"SAVI\",\"SAVI\",{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],\"SAVI\",{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"hideGroup\",\"args\":[null]}],\"setView\":[[30.7050175238026,76.9299999999991],12,[]]},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el, x, data) {\\n  return (\\n      function(el, x, data) {\\n      // get the leaflet map\\n      var map = this; //HTMLWidgets.find('#' + el.id);\\n      // we need a new div element because we have to handle\\n      // the mouseover output separately\\n      // debugger;\\n      function addElement () {\\n      // generate new div Element\\n      var newDiv = $(document.createElement('div'));\\n      // append at end of leaflet htmlwidget container\\n      $(el).append(newDiv);\\n      //provide ID and style\\n      newDiv.addClass('lnlt');\\n      newDiv.css({\\n      'position': 'relative',\\n      'bottomleft':  '0px',\\n      'background-color': 'rgba(255, 255, 255, 0.7)',\\n      'box-shadow': '0 0 2px #bbb',\\n      'background-clip': 'padding-box',\\n      'margin': '0',\\n      'padding-left': '5px',\\n      'color': '#333',\\n      'font': '9px/1.5 \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif',\\n      'z-index': '700',\\n      });\\n      return newDiv;\\n      }\\n\\n\\n      // check for already existing lnlt class to not duplicate\\n      var lnlt = $(el).find('.lnlt');\\n\\n      if(!lnlt.length) {\\n      lnlt = addElement();\\n\\n      // grab the special div we generated in the beginning\\n      // and put the mousmove output there\\n\\n      map.on('mousemove', function (e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                           ' | zoom: ' + map.getZoom() +\\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\\n                           ' | epsg: 3857 ' +\\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\\n      } else {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      }\\n      });\\n\\n      // remove the lnlt div when mouse leaves map\\n      map.on('mouseout', function (e) {\\n      var strip = document.querySelector('.lnlt');\\n      if( strip !==null) strip.remove();\\n      });\\n\\n      };\\n\\n      //$(el).keypress(67, function(e) {\\n      map.on('preclick', function(e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      var txt = document.querySelector('.lnlt').textContent;\\n      console.log(txt);\\n      //txt.innerText.focus();\\n      //txt.select();\\n      setClipboardText('\\\"' + txt + '\\\"');\\n      }\\n      });\\n\\n      }\\n      ).call(this.getMap(), el, x, data);\\n}\",\"data\":null},{\"code\":\"function(el, x, data) {\\n  return (function(el,x,data){\\n           var map = this;\\n\\n           map.on('keypress', function(e) {\\n               console.log(e.originalEvent.code);\\n               var key = e.originalEvent.code;\\n               if (key === 'KeyE') {\\n                   var bb = this.getBounds();\\n                   var txt = JSON.stringify(bb);\\n                   console.log(txt);\\n\\n                   setClipboardText('\\\\'' + txt + '\\\\'');\\n               }\\n           })\\n        }).call(this.getMap(), el, x, data);\\n}\",\"data\":null}]}}\r\nWater bodies\r\nNBR/NDWI: Normalized Burn Ratio / Normalized Difference Water Index\r\n\r\n\r\nShow code\r\n\r\nndwi <- img$expression(\r\n  expression = \"(NIR - SWIR) / (NIR + SWIR)\",\r\n  opt_map = list(\"NIR\" = img$select(\"B8\"),\r\n                 \"SWIR\" = img$select(\"B12\")\r\n                 ))$rename(\"ndwi\")\r\n\r\nMap$centerObject(roi, 12)\r\nMap$addLayer(ndwi, \r\n             visParams = list(min = 0, max = 0.5, \r\n                              palette = c(\"blue\", \"white\", \"green\")),\r\n             name = \"NDWI\")\r\n\r\n\r\n\r\n{\"x\":{\"options\":{\"minZoom\":1,\"maxZoom\":52,\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"preferCanvas\":false,\"bounceAtZoomLimits\":false,\"maxBounds\":[[[-90,-370]],[[90,370]]]},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.Positron\",\"CartoDB.Positron\",\"CartoDB.Positron\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap\",\"OpenStreetMap\",\"OpenStreetMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldImagery\",\"Esri.WorldImagery\",\"Esri.WorldImagery\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenTopoMap\",\"OpenTopoMap\",\"OpenTopoMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],[],{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"addScaleBar\",\"args\":[{\"maxWidth\":100,\"metric\":true,\"imperial\":true,\"updateWhenIdle\":true,\"position\":\"bottomleft\"}]},{\"method\":\"addTiles\",\"args\":[\"https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/52b7ab5e1457a5c83b915698cb176eed-6e1ca9dedd708137cc609fbf86cae4a1/tiles/{z}/{x}/{y}\",\"NDWI\",\"NDWI\",{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],\"NDWI\",{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"hideGroup\",\"args\":[null]}],\"setView\":[[30.7050175238026,76.9299999999991],12,[]]},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el, x, data) {\\n  return (\\n      function(el, x, data) {\\n      // get the leaflet map\\n      var map = this; //HTMLWidgets.find('#' + el.id);\\n      // we need a new div element because we have to handle\\n      // the mouseover output separately\\n      // debugger;\\n      function addElement () {\\n      // generate new div Element\\n      var newDiv = $(document.createElement('div'));\\n      // append at end of leaflet htmlwidget container\\n      $(el).append(newDiv);\\n      //provide ID and style\\n      newDiv.addClass('lnlt');\\n      newDiv.css({\\n      'position': 'relative',\\n      'bottomleft':  '0px',\\n      'background-color': 'rgba(255, 255, 255, 0.7)',\\n      'box-shadow': '0 0 2px #bbb',\\n      'background-clip': 'padding-box',\\n      'margin': '0',\\n      'padding-left': '5px',\\n      'color': '#333',\\n      'font': '9px/1.5 \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif',\\n      'z-index': '700',\\n      });\\n      return newDiv;\\n      }\\n\\n\\n      // check for already existing lnlt class to not duplicate\\n      var lnlt = $(el).find('.lnlt');\\n\\n      if(!lnlt.length) {\\n      lnlt = addElement();\\n\\n      // grab the special div we generated in the beginning\\n      // and put the mousmove output there\\n\\n      map.on('mousemove', function (e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                           ' | zoom: ' + map.getZoom() +\\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\\n                           ' | epsg: 3857 ' +\\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\\n      } else {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      }\\n      });\\n\\n      // remove the lnlt div when mouse leaves map\\n      map.on('mouseout', function (e) {\\n      var strip = document.querySelector('.lnlt');\\n      if( strip !==null) strip.remove();\\n      });\\n\\n      };\\n\\n      //$(el).keypress(67, function(e) {\\n      map.on('preclick', function(e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      var txt = document.querySelector('.lnlt').textContent;\\n      console.log(txt);\\n      //txt.innerText.focus();\\n      //txt.select();\\n      setClipboardText('\\\"' + txt + '\\\"');\\n      }\\n      });\\n\\n      }\\n      ).call(this.getMap(), el, x, data);\\n}\",\"data\":null},{\"code\":\"function(el, x, data) {\\n  return (function(el,x,data){\\n           var map = this;\\n\\n           map.on('keypress', function(e) {\\n               console.log(e.originalEvent.code);\\n               var key = e.originalEvent.code;\\n               if (key === 'KeyE') {\\n                   var bb = this.getBounds();\\n                   var txt = JSON.stringify(bb);\\n                   console.log(txt);\\n\\n                   setClipboardText('\\\\'' + txt + '\\\\'');\\n               }\\n           })\\n        }).call(this.getMap(), el, x, data);\\n}\",\"data\":null}]}}\r\nMNDWI: Modified Normalized Difference Water Index\r\n\r\n\r\nShow code\r\n\r\nmndwi <- img$expression(\r\n  expression = \"(GREEN - SWIR1) / (GREEN + SWIR1)\",\r\n  opt_map = list(\"GREEN\" = img$select(\"B3\"),\r\n                 \"SWIR1\" = img$select(\"B11\")\r\n                 ))$rename(\"mndwi\")\r\n\r\nMap$centerObject(roi, 12)\r\nMap$addLayer(ndwi, \r\n             visParams = list(min = 0, max = 0.5, \r\n                              palette = c(\"blue\", \"white\", \"green\")),\r\n             name = \"MNDWI\")\r\n\r\n\r\n\r\n{\"x\":{\"options\":{\"minZoom\":1,\"maxZoom\":52,\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"preferCanvas\":false,\"bounceAtZoomLimits\":false,\"maxBounds\":[[[-90,-370]],[[90,370]]]},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.Positron\",\"CartoDB.Positron\",\"CartoDB.Positron\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap\",\"OpenStreetMap\",\"OpenStreetMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldImagery\",\"Esri.WorldImagery\",\"Esri.WorldImagery\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenTopoMap\",\"OpenTopoMap\",\"OpenTopoMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],[],{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"addScaleBar\",\"args\":[{\"maxWidth\":100,\"metric\":true,\"imperial\":true,\"updateWhenIdle\":true,\"position\":\"bottomleft\"}]},{\"method\":\"addTiles\",\"args\":[\"https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/df8d678f8e656dd8fa38de6638590393-d9d7c4fbb0bb2f206de1fad1fb7145a5/tiles/{z}/{x}/{y}\",\"MNDWI\",\"MNDWI\",{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],\"MNDWI\",{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"hideGroup\",\"args\":[null]}],\"setView\":[[30.7050175238026,76.9299999999991],12,[]]},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el, x, data) {\\n  return (\\n      function(el, x, data) {\\n      // get the leaflet map\\n      var map = this; //HTMLWidgets.find('#' + el.id);\\n      // we need a new div element because we have to handle\\n      // the mouseover output separately\\n      // debugger;\\n      function addElement () {\\n      // generate new div Element\\n      var newDiv = $(document.createElement('div'));\\n      // append at end of leaflet htmlwidget container\\n      $(el).append(newDiv);\\n      //provide ID and style\\n      newDiv.addClass('lnlt');\\n      newDiv.css({\\n      'position': 'relative',\\n      'bottomleft':  '0px',\\n      'background-color': 'rgba(255, 255, 255, 0.7)',\\n      'box-shadow': '0 0 2px #bbb',\\n      'background-clip': 'padding-box',\\n      'margin': '0',\\n      'padding-left': '5px',\\n      'color': '#333',\\n      'font': '9px/1.5 \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif',\\n      'z-index': '700',\\n      });\\n      return newDiv;\\n      }\\n\\n\\n      // check for already existing lnlt class to not duplicate\\n      var lnlt = $(el).find('.lnlt');\\n\\n      if(!lnlt.length) {\\n      lnlt = addElement();\\n\\n      // grab the special div we generated in the beginning\\n      // and put the mousmove output there\\n\\n      map.on('mousemove', function (e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                           ' | zoom: ' + map.getZoom() +\\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\\n                           ' | epsg: 3857 ' +\\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\\n      } else {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      }\\n      });\\n\\n      // remove the lnlt div when mouse leaves map\\n      map.on('mouseout', function (e) {\\n      var strip = document.querySelector('.lnlt');\\n      if( strip !==null) strip.remove();\\n      });\\n\\n      };\\n\\n      //$(el).keypress(67, function(e) {\\n      map.on('preclick', function(e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      var txt = document.querySelector('.lnlt').textContent;\\n      console.log(txt);\\n      //txt.innerText.focus();\\n      //txt.select();\\n      setClipboardText('\\\"' + txt + '\\\"');\\n      }\\n      });\\n\\n      }\\n      ).call(this.getMap(), el, x, data);\\n}\",\"data\":null},{\"code\":\"function(el, x, data) {\\n  return (function(el,x,data){\\n           var map = this;\\n\\n           map.on('keypress', function(e) {\\n               console.log(e.originalEvent.code);\\n               var key = e.originalEvent.code;\\n               if (key === 'KeyE') {\\n                   var bb = this.getBounds();\\n                   var txt = JSON.stringify(bb);\\n                   console.log(txt);\\n\\n                   setClipboardText('\\\\'' + txt + '\\\\'');\\n               }\\n           })\\n        }).call(this.getMap(), el, x, data);\\n}\",\"data\":null}]}}\r\nAWEI_sh: Automated Water Extraction Index - shadow\r\n\r\n\r\nShow code\r\n\r\naweish <- img$expression(\r\n  expression = \"BLUE + 2.5 * GREEN - 1.5 * (NIR + SWIR1) - 0.25 * SWIR2\",\r\n  opt_map = list(\"BLUE\" = img$select(\"B2\"),\r\n                 \"GREEN\" = img$select(\"B3\"),\r\n                 \"NIR\" = img$select(\"B8\"),\r\n                 \"SWIR1\" = img$select(\"B11\"),\r\n                 \"SWIR2\" = img$select(\"B12\")\r\n                 ))$rename(\"aweish\")\r\n\r\nMap$centerObject(roi, 12)\r\nMap$addLayer(aweish, \r\n             visParams = list(min = 0, max = 1, palette = c(\"white\", \"blue\")),\r\n             name = \"AWEIsh\")\r\n\r\n\r\n\r\n{\"x\":{\"options\":{\"minZoom\":1,\"maxZoom\":52,\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"preferCanvas\":false,\"bounceAtZoomLimits\":false,\"maxBounds\":[[[-90,-370]],[[90,370]]]},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.Positron\",\"CartoDB.Positron\",\"CartoDB.Positron\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap\",\"OpenStreetMap\",\"OpenStreetMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldImagery\",\"Esri.WorldImagery\",\"Esri.WorldImagery\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenTopoMap\",\"OpenTopoMap\",\"OpenTopoMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],[],{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"addScaleBar\",\"args\":[{\"maxWidth\":100,\"metric\":true,\"imperial\":true,\"updateWhenIdle\":true,\"position\":\"bottomleft\"}]},{\"method\":\"addTiles\",\"args\":[\"https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/222db3dbc233e6de2ba0569243854acc-fca2a7d6c6df5a06ba99d2a4b47c9a5e/tiles/{z}/{x}/{y}\",\"AWEIsh\",\"AWEIsh\",{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],\"AWEIsh\",{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"hideGroup\",\"args\":[null]}],\"setView\":[[30.7050175238026,76.9299999999991],12,[]]},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el, x, data) {\\n  return (\\n      function(el, x, data) {\\n      // get the leaflet map\\n      var map = this; //HTMLWidgets.find('#' + el.id);\\n      // we need a new div element because we have to handle\\n      // the mouseover output separately\\n      // debugger;\\n      function addElement () {\\n      // generate new div Element\\n      var newDiv = $(document.createElement('div'));\\n      // append at end of leaflet htmlwidget container\\n      $(el).append(newDiv);\\n      //provide ID and style\\n      newDiv.addClass('lnlt');\\n      newDiv.css({\\n      'position': 'relative',\\n      'bottomleft':  '0px',\\n      'background-color': 'rgba(255, 255, 255, 0.7)',\\n      'box-shadow': '0 0 2px #bbb',\\n      'background-clip': 'padding-box',\\n      'margin': '0',\\n      'padding-left': '5px',\\n      'color': '#333',\\n      'font': '9px/1.5 \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif',\\n      'z-index': '700',\\n      });\\n      return newDiv;\\n      }\\n\\n\\n      // check for already existing lnlt class to not duplicate\\n      var lnlt = $(el).find('.lnlt');\\n\\n      if(!lnlt.length) {\\n      lnlt = addElement();\\n\\n      // grab the special div we generated in the beginning\\n      // and put the mousmove output there\\n\\n      map.on('mousemove', function (e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                           ' | zoom: ' + map.getZoom() +\\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\\n                           ' | epsg: 3857 ' +\\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\\n      } else {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      }\\n      });\\n\\n      // remove the lnlt div when mouse leaves map\\n      map.on('mouseout', function (e) {\\n      var strip = document.querySelector('.lnlt');\\n      if( strip !==null) strip.remove();\\n      });\\n\\n      };\\n\\n      //$(el).keypress(67, function(e) {\\n      map.on('preclick', function(e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      var txt = document.querySelector('.lnlt').textContent;\\n      console.log(txt);\\n      //txt.innerText.focus();\\n      //txt.select();\\n      setClipboardText('\\\"' + txt + '\\\"');\\n      }\\n      });\\n\\n      }\\n      ).call(this.getMap(), el, x, data);\\n}\",\"data\":null},{\"code\":\"function(el, x, data) {\\n  return (function(el,x,data){\\n           var map = this;\\n\\n           map.on('keypress', function(e) {\\n               console.log(e.originalEvent.code);\\n               var key = e.originalEvent.code;\\n               if (key === 'KeyE') {\\n                   var bb = this.getBounds();\\n                   var txt = JSON.stringify(bb);\\n                   console.log(txt);\\n\\n                   setClipboardText('\\\\'' + txt + '\\\\'');\\n               }\\n           })\\n        }).call(this.getMap(), el, x, data);\\n}\",\"data\":null}]}}\r\nBuilt up areas\r\nNDBI: Normalized Difference Built-up Index\r\n\r\n\r\nShow code\r\n\r\nndbi <- img$expression(\r\n  expression = \"(SWIR1 - NIR) / (SWIR1 + NIR)\",\r\n  opt_map = list(\"NIR\" = img$select(\"B8\"),\r\n                 \"SWIR1\" = img$select(\"B11\")\r\n                 ))$rename(\"ndbi\")\r\n\r\nMap$centerObject(roi, 12)\r\nMap$addLayer(ndbi, \r\n             visParams = list(min = -1, max = 1, palette = c(\"white\", \"brown\")),\r\n             name = \"NDBI\")\r\n\r\n\r\n\r\n{\"x\":{\"options\":{\"minZoom\":1,\"maxZoom\":52,\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"preferCanvas\":false,\"bounceAtZoomLimits\":false,\"maxBounds\":[[[-90,-370]],[[90,370]]]},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.Positron\",\"CartoDB.Positron\",\"CartoDB.Positron\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap\",\"OpenStreetMap\",\"OpenStreetMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldImagery\",\"Esri.WorldImagery\",\"Esri.WorldImagery\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenTopoMap\",\"OpenTopoMap\",\"OpenTopoMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],[],{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"addScaleBar\",\"args\":[{\"maxWidth\":100,\"metric\":true,\"imperial\":true,\"updateWhenIdle\":true,\"position\":\"bottomleft\"}]},{\"method\":\"addTiles\",\"args\":[\"https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/63ce443fd9be5e1b6bc952ff6ec34e89-19614802ccd40cdd793cadbd2c73d9ac/tiles/{z}/{x}/{y}\",\"NDBI\",\"NDBI\",{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],\"NDBI\",{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"hideGroup\",\"args\":[null]}],\"setView\":[[30.7050175238026,76.9299999999991],12,[]]},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el, x, data) {\\n  return (\\n      function(el, x, data) {\\n      // get the leaflet map\\n      var map = this; //HTMLWidgets.find('#' + el.id);\\n      // we need a new div element because we have to handle\\n      // the mouseover output separately\\n      // debugger;\\n      function addElement () {\\n      // generate new div Element\\n      var newDiv = $(document.createElement('div'));\\n      // append at end of leaflet htmlwidget container\\n      $(el).append(newDiv);\\n      //provide ID and style\\n      newDiv.addClass('lnlt');\\n      newDiv.css({\\n      'position': 'relative',\\n      'bottomleft':  '0px',\\n      'background-color': 'rgba(255, 255, 255, 0.7)',\\n      'box-shadow': '0 0 2px #bbb',\\n      'background-clip': 'padding-box',\\n      'margin': '0',\\n      'padding-left': '5px',\\n      'color': '#333',\\n      'font': '9px/1.5 \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif',\\n      'z-index': '700',\\n      });\\n      return newDiv;\\n      }\\n\\n\\n      // check for already existing lnlt class to not duplicate\\n      var lnlt = $(el).find('.lnlt');\\n\\n      if(!lnlt.length) {\\n      lnlt = addElement();\\n\\n      // grab the special div we generated in the beginning\\n      // and put the mousmove output there\\n\\n      map.on('mousemove', function (e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                           ' | zoom: ' + map.getZoom() +\\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\\n                           ' | epsg: 3857 ' +\\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\\n      } else {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      }\\n      });\\n\\n      // remove the lnlt div when mouse leaves map\\n      map.on('mouseout', function (e) {\\n      var strip = document.querySelector('.lnlt');\\n      if( strip !==null) strip.remove();\\n      });\\n\\n      };\\n\\n      //$(el).keypress(67, function(e) {\\n      map.on('preclick', function(e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      var txt = document.querySelector('.lnlt').textContent;\\n      console.log(txt);\\n      //txt.innerText.focus();\\n      //txt.select();\\n      setClipboardText('\\\"' + txt + '\\\"');\\n      }\\n      });\\n\\n      }\\n      ).call(this.getMap(), el, x, data);\\n}\",\"data\":null},{\"code\":\"function(el, x, data) {\\n  return (function(el,x,data){\\n           var map = this;\\n\\n           map.on('keypress', function(e) {\\n               console.log(e.originalEvent.code);\\n               var key = e.originalEvent.code;\\n               if (key === 'KeyE') {\\n                   var bb = this.getBounds();\\n                   var txt = JSON.stringify(bb);\\n                   console.log(txt);\\n\\n                   setClipboardText('\\\\'' + txt + '\\\\'');\\n               }\\n           })\\n        }).call(this.getMap(), el, x, data);\\n}\",\"data\":null}]}}\r\nBUI: Built-up Index\r\n\r\n\r\nShow code\r\n\r\nbui <- img$expression(\r\n  expression = \"((SWIR1 - NIR) / (SWIR1 + NIR)) - ((NIR - RED)/(NIR + RED))\",\r\n  opt_map = list(\"RED\" = img$select(\"B4\"),\r\n                 \"NIR\" = img$select(\"B8\"),\r\n                 \"SWIR1\" = img$select(\"B11\")\r\n                 ))$rename(\"bui\")\r\n\r\n\r\nMap$centerObject(roi, 12)\r\nMap$addLayer(bui, \r\n             visParams = list(min = -1, max = 0.5, palette = c(\"green\", \"white\", \"brown\")),\r\n             name = \"BUI\")\r\n\r\n\r\n\r\n{\"x\":{\"options\":{\"minZoom\":1,\"maxZoom\":52,\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"preferCanvas\":false,\"bounceAtZoomLimits\":false,\"maxBounds\":[[[-90,-370]],[[90,370]]]},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.Positron\",\"CartoDB.Positron\",\"CartoDB.Positron\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap\",\"OpenStreetMap\",\"OpenStreetMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldImagery\",\"Esri.WorldImagery\",\"Esri.WorldImagery\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenTopoMap\",\"OpenTopoMap\",\"OpenTopoMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],[],{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"addScaleBar\",\"args\":[{\"maxWidth\":100,\"metric\":true,\"imperial\":true,\"updateWhenIdle\":true,\"position\":\"bottomleft\"}]},{\"method\":\"addTiles\",\"args\":[\"https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/4f84eae155d62c6023f7bb2648827c41-f61d4ba15850c8f2ecce1bda59990c03/tiles/{z}/{x}/{y}\",\"BUI\",\"BUI\",{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],\"BUI\",{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"hideGroup\",\"args\":[null]}],\"setView\":[[30.7050175238026,76.9299999999991],12,[]]},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el, x, data) {\\n  return (\\n      function(el, x, data) {\\n      // get the leaflet map\\n      var map = this; //HTMLWidgets.find('#' + el.id);\\n      // we need a new div element because we have to handle\\n      // the mouseover output separately\\n      // debugger;\\n      function addElement () {\\n      // generate new div Element\\n      var newDiv = $(document.createElement('div'));\\n      // append at end of leaflet htmlwidget container\\n      $(el).append(newDiv);\\n      //provide ID and style\\n      newDiv.addClass('lnlt');\\n      newDiv.css({\\n      'position': 'relative',\\n      'bottomleft':  '0px',\\n      'background-color': 'rgba(255, 255, 255, 0.7)',\\n      'box-shadow': '0 0 2px #bbb',\\n      'background-clip': 'padding-box',\\n      'margin': '0',\\n      'padding-left': '5px',\\n      'color': '#333',\\n      'font': '9px/1.5 \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif',\\n      'z-index': '700',\\n      });\\n      return newDiv;\\n      }\\n\\n\\n      // check for already existing lnlt class to not duplicate\\n      var lnlt = $(el).find('.lnlt');\\n\\n      if(!lnlt.length) {\\n      lnlt = addElement();\\n\\n      // grab the special div we generated in the beginning\\n      // and put the mousmove output there\\n\\n      map.on('mousemove', function (e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                           ' | zoom: ' + map.getZoom() +\\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\\n                           ' | epsg: 3857 ' +\\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\\n      } else {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      }\\n      });\\n\\n      // remove the lnlt div when mouse leaves map\\n      map.on('mouseout', function (e) {\\n      var strip = document.querySelector('.lnlt');\\n      if( strip !==null) strip.remove();\\n      });\\n\\n      };\\n\\n      //$(el).keypress(67, function(e) {\\n      map.on('preclick', function(e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      var txt = document.querySelector('.lnlt').textContent;\\n      console.log(txt);\\n      //txt.innerText.focus();\\n      //txt.select();\\n      setClipboardText('\\\"' + txt + '\\\"');\\n      }\\n      });\\n\\n      }\\n      ).call(this.getMap(), el, x, data);\\n}\",\"data\":null},{\"code\":\"function(el, x, data) {\\n  return (function(el,x,data){\\n           var map = this;\\n\\n           map.on('keypress', function(e) {\\n               console.log(e.originalEvent.code);\\n               var key = e.originalEvent.code;\\n               if (key === 'KeyE') {\\n                   var bb = this.getBounds();\\n                   var txt = JSON.stringify(bb);\\n                   console.log(txt);\\n\\n                   setClipboardText('\\\\'' + txt + '\\\\'');\\n               }\\n           })\\n        }).call(this.getMap(), el, x, data);\\n}\",\"data\":null}]}}\r\nSoil related Indices\r\nNDTI: Normalized Difference Tillage Index\r\n\r\n\r\nShow code\r\n\r\nndti <- img$expression(\r\n  expression = \"(SWIR1 - SWIR2) / (SWIR1 + SWIR2)\",\r\n  opt_map = list(\"SWIR1\" = img$select(\"B11\"),\r\n                 \"SWIR2\" = img$select(\"B12\")\r\n                 ))$rename(\"ndti\")\r\n\r\nMap$centerObject(roi, 12)\r\nMap$addLayer(ndti, \r\n             visParams = list(min = 0, max = 0.5, palette = c(\"brown\", \"yellow\", \"green\")),\r\n             name = \"NDTI\")\r\n\r\n\r\n\r\n{\"x\":{\"options\":{\"minZoom\":1,\"maxZoom\":52,\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"preferCanvas\":false,\"bounceAtZoomLimits\":false,\"maxBounds\":[[[-90,-370]],[[90,370]]]},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.Positron\",\"CartoDB.Positron\",\"CartoDB.Positron\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap\",\"OpenStreetMap\",\"OpenStreetMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldImagery\",\"Esri.WorldImagery\",\"Esri.WorldImagery\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenTopoMap\",\"OpenTopoMap\",\"OpenTopoMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],[],{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"addScaleBar\",\"args\":[{\"maxWidth\":100,\"metric\":true,\"imperial\":true,\"updateWhenIdle\":true,\"position\":\"bottomleft\"}]},{\"method\":\"addTiles\",\"args\":[\"https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/6c6da87e803338757d588bf53e0e5eee-3233f137a006cf811baaa3f6efbdbef8/tiles/{z}/{x}/{y}\",\"NDTI\",\"NDTI\",{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],\"NDTI\",{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"hideGroup\",\"args\":[null]}],\"setView\":[[30.7050175238026,76.9299999999991],12,[]]},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el, x, data) {\\n  return (\\n      function(el, x, data) {\\n      // get the leaflet map\\n      var map = this; //HTMLWidgets.find('#' + el.id);\\n      // we need a new div element because we have to handle\\n      // the mouseover output separately\\n      // debugger;\\n      function addElement () {\\n      // generate new div Element\\n      var newDiv = $(document.createElement('div'));\\n      // append at end of leaflet htmlwidget container\\n      $(el).append(newDiv);\\n      //provide ID and style\\n      newDiv.addClass('lnlt');\\n      newDiv.css({\\n      'position': 'relative',\\n      'bottomleft':  '0px',\\n      'background-color': 'rgba(255, 255, 255, 0.7)',\\n      'box-shadow': '0 0 2px #bbb',\\n      'background-clip': 'padding-box',\\n      'margin': '0',\\n      'padding-left': '5px',\\n      'color': '#333',\\n      'font': '9px/1.5 \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif',\\n      'z-index': '700',\\n      });\\n      return newDiv;\\n      }\\n\\n\\n      // check for already existing lnlt class to not duplicate\\n      var lnlt = $(el).find('.lnlt');\\n\\n      if(!lnlt.length) {\\n      lnlt = addElement();\\n\\n      // grab the special div we generated in the beginning\\n      // and put the mousmove output there\\n\\n      map.on('mousemove', function (e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                           ' | zoom: ' + map.getZoom() +\\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\\n                           ' | epsg: 3857 ' +\\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\\n      } else {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      }\\n      });\\n\\n      // remove the lnlt div when mouse leaves map\\n      map.on('mouseout', function (e) {\\n      var strip = document.querySelector('.lnlt');\\n      if( strip !==null) strip.remove();\\n      });\\n\\n      };\\n\\n      //$(el).keypress(67, function(e) {\\n      map.on('preclick', function(e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      var txt = document.querySelector('.lnlt').textContent;\\n      console.log(txt);\\n      //txt.innerText.focus();\\n      //txt.select();\\n      setClipboardText('\\\"' + txt + '\\\"');\\n      }\\n      });\\n\\n      }\\n      ).call(this.getMap(), el, x, data);\\n}\",\"data\":null},{\"code\":\"function(el, x, data) {\\n  return (function(el,x,data){\\n           var map = this;\\n\\n           map.on('keypress', function(e) {\\n               console.log(e.originalEvent.code);\\n               var key = e.originalEvent.code;\\n               if (key === 'KeyE') {\\n                   var bb = this.getBounds();\\n                   var txt = JSON.stringify(bb);\\n                   console.log(txt);\\n\\n                   setClipboardText('\\\\'' + txt + '\\\\'');\\n               }\\n           })\\n        }).call(this.getMap(), el, x, data);\\n}\",\"data\":null}]}}\r\nBSI: Bare Soil Index\r\n\r\n\r\nShow code\r\n\r\nbsi <- img$expression(\r\n  expression = \"(((SWIR1 + RED) - (NIR + BLUE)) / (SWIR1 + RED)) + (NIR + BLUE)\",\r\n  opt_map = list(\"BLUE\" = img$select(\"B2\"),\r\n                 \"RED\" = img$select(\"B4\"),\r\n                 \"NIR\" = img$select(\"B8\"),\r\n                 \"SWIR1\" = img$select(\"B11\"),\r\n                 \"SWIR2\" = img$select(\"B12\")\r\n                 ))$rename(\"bsi\")\r\n\r\nMap$centerObject(roi, 12)\r\nMap$addLayer(bsi, \r\n             visParams = list(min = 1000, max = 4000, palette = c(\"white\", \"brown\")),\r\n             name = \"BSI\")\r\n\r\n\r\n\r\n{\"x\":{\"options\":{\"minZoom\":1,\"maxZoom\":52,\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"preferCanvas\":false,\"bounceAtZoomLimits\":false,\"maxBounds\":[[[-90,-370]],[[90,370]]]},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.Positron\",\"CartoDB.Positron\",\"CartoDB.Positron\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap\",\"OpenStreetMap\",\"OpenStreetMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldImagery\",\"Esri.WorldImagery\",\"Esri.WorldImagery\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenTopoMap\",\"OpenTopoMap\",\"OpenTopoMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],[],{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"addScaleBar\",\"args\":[{\"maxWidth\":100,\"metric\":true,\"imperial\":true,\"updateWhenIdle\":true,\"position\":\"bottomleft\"}]},{\"method\":\"addTiles\",\"args\":[\"https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/1cb49aa31c08388baf93a4734df60fe9-1a852d5b6ced1f98e7a019a022a9c893/tiles/{z}/{x}/{y}\",\"BSI\",\"BSI\",{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false}]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"OpenStreetMap\",\"CartoDB.DarkMatter\",\"Esri.WorldImagery\",\"OpenTopoMap\"],\"BSI\",{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"hideGroup\",\"args\":[null]}],\"setView\":[[30.7050175238026,76.9299999999991],12,[]]},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el, x, data) {\\n  return (\\n      function(el, x, data) {\\n      // get the leaflet map\\n      var map = this; //HTMLWidgets.find('#' + el.id);\\n      // we need a new div element because we have to handle\\n      // the mouseover output separately\\n      // debugger;\\n      function addElement () {\\n      // generate new div Element\\n      var newDiv = $(document.createElement('div'));\\n      // append at end of leaflet htmlwidget container\\n      $(el).append(newDiv);\\n      //provide ID and style\\n      newDiv.addClass('lnlt');\\n      newDiv.css({\\n      'position': 'relative',\\n      'bottomleft':  '0px',\\n      'background-color': 'rgba(255, 255, 255, 0.7)',\\n      'box-shadow': '0 0 2px #bbb',\\n      'background-clip': 'padding-box',\\n      'margin': '0',\\n      'padding-left': '5px',\\n      'color': '#333',\\n      'font': '9px/1.5 \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif',\\n      'z-index': '700',\\n      });\\n      return newDiv;\\n      }\\n\\n\\n      // check for already existing lnlt class to not duplicate\\n      var lnlt = $(el).find('.lnlt');\\n\\n      if(!lnlt.length) {\\n      lnlt = addElement();\\n\\n      // grab the special div we generated in the beginning\\n      // and put the mousmove output there\\n\\n      map.on('mousemove', function (e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                           ' | zoom: ' + map.getZoom() +\\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\\n                           ' | epsg: 3857 ' +\\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\\n      } else {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      }\\n      });\\n\\n      // remove the lnlt div when mouse leaves map\\n      map.on('mouseout', function (e) {\\n      var strip = document.querySelector('.lnlt');\\n      if( strip !==null) strip.remove();\\n      });\\n\\n      };\\n\\n      //$(el).keypress(67, function(e) {\\n      map.on('preclick', function(e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      var txt = document.querySelector('.lnlt').textContent;\\n      console.log(txt);\\n      //txt.innerText.focus();\\n      //txt.select();\\n      setClipboardText('\\\"' + txt + '\\\"');\\n      }\\n      });\\n\\n      }\\n      ).call(this.getMap(), el, x, data);\\n}\",\"data\":null},{\"code\":\"function(el, x, data) {\\n  return (function(el,x,data){\\n           var map = this;\\n\\n           map.on('keypress', function(e) {\\n               console.log(e.originalEvent.code);\\n               var key = e.originalEvent.code;\\n               if (key === 'KeyE') {\\n                   var bb = this.getBounds();\\n                   var txt = JSON.stringify(bb);\\n                   console.log(txt);\\n\\n                   setClipboardText('\\\\'' + txt + '\\\\'');\\n               }\\n           })\\n        }).call(this.getMap(), el, x, data);\\n}\",\"data\":null}]}}\r\n\r\n\r\n\r\nAybar, Cesar. 2021. rgee: R Bindings for Calling the Earth Engine API. https://CRAN.R-project.org/package=rgee.\r\n\r\n\r\nAybar, Cesar, Qiusheng Wu, Lesly Bautista, Roy Yali, and Antony Barja. 2020. “rgee: An R Package for Interacting with Google Earth Engine.” Journal of Open Source Software 5 (51): 2272. https://doi.org/10.21105/joss.02272.\r\n\r\n\r\nGorelick, Noel, Matt Hancher, Mike Dixon, Simon Ilyushchenko, David Thau, and Rebecca Moore. 2017. “Google Earth Engine: Planetary-Scale Geospatial Analysis for Everyone” 202 (December): 18–27. https://doi.org/10.1016/j.rse.2017.06.031.\r\n\r\n\r\nR Core Team. 2021. R: A Language and Environment for Statistical Computing. Vienna, Austria: R Foundation for Statistical Computing. https://www.R-project.org/.\r\n\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-10-17T22:56:07+05:30",
    "input_file": "rgee-composites.knit.md"
  },
  {
    "path": "posts/2021-10-15-mwls-climate/",
    "title": "mwls-climate",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Abhishek Kumar",
        "url": "https://akumar.netlify.app/"
      }
    ],
    "date": "2021-10-15",
    "categories": [],
    "contents": "\r\nAbstract\r\nIntroduction\r\nMethods\r\nStudy site\r\nData\r\n\r\n                  V1      V2\r\ntemperature    MODIS Landsat\r\nprecipitation CHIRPS    <NA>\r\n\r\n\r\n\r\nhtml {\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\r\n}\r\n\r\n#yosoiqsfbc .gt_table {\r\n  display: table;\r\n  border-collapse: collapse;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  color: #333333;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  font-style: normal;\r\n  background-color: #FFFFFF;\r\n  width: auto;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #A8A8A8;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #A8A8A8;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n}\r\n\r\n#yosoiqsfbc .gt_heading {\r\n  background-color: #FFFFFF;\r\n  text-align: center;\r\n  border-bottom-color: #FFFFFF;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#yosoiqsfbc .gt_title {\r\n  color: #333333;\r\n  font-size: 125%;\r\n  font-weight: initial;\r\n  padding-top: 4px;\r\n  padding-bottom: 4px;\r\n  border-bottom-color: #FFFFFF;\r\n  border-bottom-width: 0;\r\n}\r\n\r\n#yosoiqsfbc .gt_subtitle {\r\n  color: #333333;\r\n  font-size: 85%;\r\n  font-weight: initial;\r\n  padding-top: 0;\r\n  padding-bottom: 6px;\r\n  border-top-color: #FFFFFF;\r\n  border-top-width: 0;\r\n}\r\n\r\n#yosoiqsfbc .gt_bottom_border {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#yosoiqsfbc .gt_col_headings {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#yosoiqsfbc .gt_col_heading {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#yosoiqsfbc .gt_column_spanner_outer {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  padding-left: 4px;\r\n  padding-right: 4px;\r\n}\r\n\r\n#yosoiqsfbc .gt_column_spanner_outer:first-child {\r\n  padding-left: 0;\r\n}\r\n\r\n#yosoiqsfbc .gt_column_spanner_outer:last-child {\r\n  padding-right: 0;\r\n}\r\n\r\n#yosoiqsfbc .gt_column_spanner {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n  overflow-x: hidden;\r\n  display: inline-block;\r\n  width: 100%;\r\n}\r\n\r\n#yosoiqsfbc .gt_group_heading {\r\n  padding: 8px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#yosoiqsfbc .gt_empty_group_heading {\r\n  padding: 0.5px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#yosoiqsfbc .gt_from_md > :first-child {\r\n  margin-top: 0;\r\n}\r\n\r\n#yosoiqsfbc .gt_from_md > :last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n#yosoiqsfbc .gt_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  margin: 10px;\r\n  border-top-style: solid;\r\n  border-top-width: 1px;\r\n  border-top-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#yosoiqsfbc .gt_stub {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-right-style: solid;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  padding-left: 12px;\r\n}\r\n\r\n#yosoiqsfbc .gt_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#yosoiqsfbc .gt_first_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#yosoiqsfbc .gt_grand_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#yosoiqsfbc .gt_first_grand_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: double;\r\n  border-top-width: 6px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#yosoiqsfbc .gt_striped {\r\n  background-color: rgba(128, 128, 128, 0.05);\r\n}\r\n\r\n#yosoiqsfbc .gt_table_body {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#yosoiqsfbc .gt_footnotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#yosoiqsfbc .gt_footnote {\r\n  margin: 0px;\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#yosoiqsfbc .gt_sourcenotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#yosoiqsfbc .gt_sourcenote {\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#yosoiqsfbc .gt_left {\r\n  text-align: left;\r\n}\r\n\r\n#yosoiqsfbc .gt_center {\r\n  text-align: center;\r\n}\r\n\r\n#yosoiqsfbc .gt_right {\r\n  text-align: right;\r\n  font-variant-numeric: tabular-nums;\r\n}\r\n\r\n#yosoiqsfbc .gt_font_normal {\r\n  font-weight: normal;\r\n}\r\n\r\n#yosoiqsfbc .gt_font_bold {\r\n  font-weight: bold;\r\n}\r\n\r\n#yosoiqsfbc .gt_font_italic {\r\n  font-style: italic;\r\n}\r\n\r\n#yosoiqsfbc .gt_super {\r\n  font-size: 65%;\r\n}\r\n\r\n#yosoiqsfbc .gt_footnote_marks {\r\n  font-style: italic;\r\n  font-weight: normal;\r\n  font-size: 65%;\r\n}\r\nSatellite\r\n      Sensor\r\n      Temporal Coverage\r\n    Landsat 4\r\nThematic Mapper (TM)\r\n07/1982 - 12/1993Landsat 5\r\nThematic Mapper (TM)\r\n03/1984 - 01/2013Landsat 7\r\nEnhanced Thematic Mapper (ETM+)\r\n04/1999 - PresentLandsat 8\r\nOperational Land Imager (OLI) / Thermal Infrared Sensor (TIRS)\r\n02/2013 - PresentTerra\r\nAdvanced Spaceborne Thermal Emission and Reflection Radiometer(ASTER) & MODerate-resolution Imaging Spectroradiometer (MODIS)\r\n12/1999 - PresentAqua\r\nMODerate-resolution Imaging Spectroradiometer (MODIS)\r\n04/2002 - PresentInternational Space Station / ECOsystem Spaceborne Thermal Radiometer Experiment on Space Station (ECOSTRESS)\r\nPrototype HyspIRI Thermal Infrared Radiometer (PHyTIR)\r\n06/2018 - Present\r\n\r\nStatistical analysis\r\nResults\r\nWorldClim\r\nDiscussion\r\nConclusion\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-10-15T15:52:26+05:30",
    "input_file": {}
  },
  {
    "path": "posts/2021-08-27-mwls/",
    "title": "Khol Hi Raitan (Morni Hills) Wildlife Sanctuary",
    "description": "A short description and introduction to Khol Hi Raitan Wildlife Sanctuary.",
    "author": [
      {
        "name": "Abhishek Kumar",
        "url": "https://akumar.netlify.app/"
      }
    ],
    "date": "2021-08-27",
    "categories": [
      "protected areas",
      "siwaliks",
      "morni hills",
      "khol hi raitan wildlife sanctuary"
    ],
    "contents": "\r\n\r\nContents\r\nAbstract\r\nIntroduction\r\nNotification and declaration\r\nLocation and Physiography\r\nBiodiversity\r\nVegetation\r\nEcosystem services\r\n\r\nSoils\r\nClimate\r\nLand Cover\r\nEcology\r\nEcological Problems\r\nThreats\r\n\r\n\r\n\r\nShow code\r\n\r\n#library(bfast)       # change detection algorithms\r\n#library(lubridate)   # handling date object\r\n#library(osmdata)     # spatial data extraction\r\nlibrary(raster)      # raster data\r\n#library(rgee)        # Google Earth Engine in R\r\nlibrary(sf)          # spatial data handling\r\nlibrary(tidyverse)   # general data wrangling and visualisation\r\nlibrary(tmap)        # thematic mapping \r\n\r\n#knitr::write_bib(x = c(.packages(), \"distill\"), \"packages.bib\")\r\n\r\n\r\n\r\nAbstract\r\nIntroduction\r\nVarious developmental activities and requirements of local people have brought significant ecological changes and degradation in the Siwalik Hills of the Inter State Chandigarh Region.\r\nSiwalik landscape has been identified as one of the most degraded ecosystems of India primarily due to its fragile soil resulting in heavy soil erosion. Weathering and erosion in this area has produced a variety of erosional land-form features. The seasonal streams commonly called choes run from NE to SW descend into the valleys. On an average more than 50% of the total rain in the Siwalik ends in run-off. At foothills, artificial Sukhna lake was constructed in 1958 for water storage, however, it is facing siltation problem due to erosion and sedimentation from Siwalik hills (Y. Singh 2002). The Chandigarh Siwalik hills and Morni hills are separated by the Ghaggar river (Y. Singh 2001). Tikkar taal is a natural lake at the site and known to support several diatoms (Saini, Khanagwal, and Singh 2017). Water from natural resources have been reported to contain varying amount of Uranium and Radon indicating their presence in the rocks in the area (Joga Singh et al. 2008b, 2008a, 2009). The soils also have varying degree of Uranium, Radium and Radon (Pundir, Rajinder, and Sunil 2014; Joga Singh et al. 2008b).\r\nhttp://haryanaforest.gov.in/\r\nNotification and declaration\r\nAn area of 2,226.58 ha was initially notified as R-70 Khol Hi-Raitan (KHR) Wildlife Sanctuary on 10 December 2004 with Gazette notification No. S.O. 269/C.A. 53/1972/S. 26-A/2004 by Forest Department of Government of Haryana. Later, the forest area was identified to cover a total of 2,656.38 ha and declared as wildlife sanctuary on 07 September 2007 with gazette notification No. S.O. 71/C.A. 53/1972/S.26/2007.\r\nThe eco-sensitive zone (ESZ) around KHR was proposed as area within five kilometres of the boundary on 03 June 2009 with notification No. S.O. 1394 (E).\r\n\r\n\r\nShow code\r\n\r\nknitr::include_graphics(\"data/mwls-map-2009.jpg\")\r\n\r\n\r\n\r\n\r\nFigure 1: Ecosensitive Zone (ESZ) of Khol Hi-Raital wildlife sanctuary as drafted in September 2009. Figure from Haryana Forest Department\r\n\r\n\r\n\r\nHowever, the proposal has been revised in another draft No. S.O. 1395 (E) dated 21 May 2015 and the ESZ has been revised to vary from zero to 925 meters only.\r\n\r\n\r\nShow code\r\n\r\n\r\nknitr::include_graphics(\"data/mwls-map-2016.jpg\")\r\n\r\n\r\n\r\n\r\nFigure 2: Ecosensitive Zone (ESZ) of Khol Hi-Raital wildlife sanctuary as drafted in May 2015. Figure from MoEFCC, Govt. of India\r\n\r\n\r\n\r\nLocation and Physiography\r\n\r\n\r\nShow code\r\n\r\n## extract boundaries and data from OpenStreetMap\r\nlibrary(osmdata)\r\n\r\n## define a bounding box for area of interest\r\nosm_bbox <- c(76.8, 30.6, 77.1, 30.9) # xmin, ymin, xmax, ymax\r\n\r\n## extract boundary of the protected area as sf from OpenStreetMap (osm)\r\nprotected_areas <- opq(osm_bbox) |>\r\n  add_osm_feature(key = \"boundary\", value = \"protected_area\", value_exact = F) |>\r\n  osmdata_sf()\r\n\r\n## rename protected areas to short names and save to local file as gpkg\r\nprotected_areas$osm_polygons |> select(name, geometry) |>\r\n  mutate(short_name = c(\"MH\", \"BS\", \"SL\")) |>\r\n  st_write(\"data/protected_areas.gpkg\")\r\n\r\n## extract rivers / streams (waterways) from osm as sf\r\nwaterways <- opq(osm_bbox) |> add_osm_feature(key = \"waterway\") |> \r\n  osmdata_sf()\r\n\r\n## save waterways to local file as gpkg\r\nwaterways$osm_lines |> select(name, waterway, geometry) |> \r\n  st_write(\"data/waterways.gpkg\")\r\n\r\n## extract roadways (highway) major roads from osm as sf\r\nhighways <- opq(osm_bbox) |> add_osm_feature(key = \"highway\") |> \r\n  osmdata_sf()\r\n\r\n## save roadways to local file as gpkg\r\nhighways$osm_lines |> select(name, highway, geometry) |> \r\n  st_write(\"data/highways.gpkg\")\r\n\r\n## load, merge, and crop pre-downloaded SRTM 30 m elevation data \r\nelev <- raster(\"D:/spatial-data/dem/n30_e076_1arc_v3.tif\") |>\r\n  merge(raster(\"D:/spatial-data/dem/n30_e077_1arc_v3.tif\")) |> \r\n  crop(extent(76.85, 77.01, 30.66, 30.75)) # morni hills wls\r\n\r\n## prepare and save boundaries for elevation bands\r\nmasked_elev <- elev |> mask(mwls)\r\nreclass_matrix <- matrix(data = c(300, 400, 1, \r\n                                  400, 500, 2, \r\n                                  500, 600, 3, \r\n                                  600, 700, 4, \r\n                                  700, 800, 5), \r\n                         ncol = 3, byrow = T)\r\nmasked_elev |> reclassify(rcl = reclass_matrix) |>\r\n  rasterToPolygons(dissolve = T) |> st_as_sf() |> \r\n  mutate(elev_zone = c(\"301-400\", \"401-500\", \"501-600\", \"601-700\", \"701-800\")) |>\r\n  st_write(\"data/elev_band.gpkg\")\r\n\r\n## prepare and save hillshade\r\nhillShade(\r\n  # extract slope from elevation\r\n  slope = terrain(elev, opt= \"slope\"),\r\n  \r\n  # extract aspect from elevation\r\n  aspect = terrain(elev, opt= \"aspect\"), \r\n  \r\n  # 45 altitude angle and 315 azimuth angle\r\n  angle = 45, direction = 315) |> \r\n    writeRaster(\"data/hill_shade.tif\")\r\n\r\n\r\n\r\n\r\n\r\nShow code\r\n\r\n## add hillshade\r\ntm_shape(hill_shade) + \r\n    tm_raster(palette = \"-Greys\", n = 100, style = \"cont\", legend.show = FALSE) +\r\n    \r\n    tm_graticules(lwd = 1.5, col = \"grey75\", labels.size = 0.85) +  \r\n    \r\n  ## add elevation bands\r\n    tm_shape(elev_band) + tm_fill(col = \"elev_zone\", alpha = 0.7, palette = \"Greens\",\r\n                                 title = \"Elevation (m)\") + \r\n    \r\n    ## add boundary of protected area\r\n  tm_shape(mwls) + tm_borders(col = \"seagreen\", lwd = 2.5) +\r\n    \r\n    ## add rivers and streams\r\n  tm_shape(rivers) + tm_lines(col = \"#9bbff4\", lwd = 6) +\r\n  tm_shape(streams) + tm_lines(col = \"#9bbff4\", lwd = 3) +\r\n  \r\n  ## add major roads\r\n  tm_shape(tertiary_roads) + tm_lines(col = \"white\", lwd = 1.5) +\r\n  tm_shape(secondary_roads) + tm_lines(col = \"white\", lwd = 3) +\r\n  tm_shape(trunk_roads) + tm_lines(col = \"white\", lwd = 4) +\r\n  \r\n    ## add legend\r\n  tm_add_legend(type = \"line\", labels = \"Roads\", col = \"white\", \r\n                lwd = 4) +\r\n    tm_add_legend(type = \"line\", labels = \"Rivers\", col = \"skyblue\", lwd = 4) +\r\n    \r\n    \r\n    ## add compass and scale bar\r\n  tm_compass(position = c(0.89, 0.84), size = 2.5, bg.color = \"grey90\", \r\n             bg.alpha = 0.7) +\r\n  tm_scale_bar(position = c(0.26, 0.001), breaks = c(0, 5, 10), text.size = 0.75) +\r\n    \r\n    \r\n    ## adjust layout\r\n  tm_layout(frame.double.line = T, compass.type = \"arrow\", \r\n            legend.position = c(0.015, 0.015), legend.bg.color = \"grey90\", \r\n            legend.bg.alpha = 0.7, \r\n            main.title = \"Khol Hi Raitan (Morni Hills) Wildlife Sanctuary\",\r\n            main.title.position = \"center\",\r\n            legend.text.size = 0.85) \r\n\r\n\r\n\r\n\r\nFigure 3: Location and topography of Khol Hi Raitan Wildlife Sanctuary. The map is prepared in R programming environment using the package tmap (tmap2018?)\r\n\r\n\r\n\r\nShow code\r\n\r\n\r\n## remove all variables from the environment\r\nrm(list = ls())\r\n\r\n\r\n\r\nBiodiversity\r\nThe Morni hills are rich in diversity of flora as well as fauna. The site is inhabited by diverse group of non-primates (Chopra, Bhoombak, and Kumar 2013). As many as 156 birds can be observed at lower Siwalik foothills (Chopra and Sharma 2014).\r\nVegetation\r\nPalynostratigraphical studies of Subathu formation revealed the presence of dinoflagellates cysts, acritarch, fungal spores and ascostroma, pteridophytic spores, and pollen grains of gymnosperms and angiosperms (Sarkar and Prasad 2000). The Siwalik hills probably hosted a luxuriant vegetation in the pre-glacial times in view of rich and varied flora and fauna discovered from wide and distant localities in them. The account of the present-day flora and fauna shows that much has been lost in the last 150 years or more. Vegetation is analysed in three forest types of the site up to a limited extent previously (Rout and Gupta 1989). Several attempts have been made to document the plant diversity of the region (Jain2001?). Orchids are poorly represented and only three orchids (Habenaria plantaginea Lindl., Rhynchostylis retusa Bl. and Zeuxine strateumatica (L.) Schltr.) have been reported from Haryana state (Jain et al. 2000; S. Kumar 2001). Another orchid (Eulophia dabia (D.Don) Hochr.) was later added to the state’s flora (Vij and Verma 2005). Studies have clearly shown that the vegetation of Morni hills is under threat and as many as 61 species have been disappeared since 2000 (S. Singh et al. 2014).\r\nEcosystem services\r\nLand-use changes (in terms of controlled grazing and increased agriculture), physical structures for water harvesting and vegetation (especially grasses) have significantly reduced erosion and sedimentation. Erosion control combined with land-use changes has resulted in increased the biomass productivities of agriculture, timber and fodder (Scott and Walter 1993). Further, watershed development activities have also contributed the increase in vegetation cover and reduction in soil loss due to high water runoff (O. Singh, Sharma, and Singh 2016). The local inhabitants already know that some plants are more effective in controlling soil erosion. For example, perennial Jhoond grass (Saccharum bengalense) and Bhabbar grass (Eulaliopsis binata) that is thought to be symbiotic with Khair (Acacia catechu), is used to prevent soil erosion (Scott and Walter 1993). Similarly, another plant called Jhingan (Lannea coromandelica) and vegetative barriers of Agave is used as fence for the fields and to stabilize eroding slopes, respectively (Scott and Walter 1993). The utilization various plants as a source of medicine, food, fodder, fibre, gum and dye indicate their socio-economic importance to the local people (J. Singh, Singh, and Laxmi 2017). More than 300 species from the Morni hills only are reported to be of medicinal importance (Balkrishna et al. 2018). Some of Lamiaceous plants possess anti-oxidant properties (S. Singh et al. 2014). Barberry (Berberis aristata DC.) from the hills have been implicated for dyeing the silk (Pruthi, Chawla, and Yadav 2008). Man-made disturbances especially Tourism can potentially threaten the biodiversity and ecological balance. Though tourism may offer economic development, there are also increased chances of habitat degradation and biodiversity loss (Chand 2015). Several trees of the area serve as sleeping site for near threatened Hanuman Langurs (Chopra, Bhoombak, and Kumar 2012).\r\nSoils\r\nThe Lower Shivaliks are dominated by alluvial sediments chiefly consisting of loose sand and gravel inserted with clay horizons. Soil is clay loam or silt loam and underlying rocks are soft sandstones that are prone to erosion and result in high water runoff (Rout and Gupta 1990b). The alkali soils of the region are low in organic matter and deficient in nutrients, probably due to minimal leaf litter (R. Kumar et al. 1995).\r\nClimate\r\nThe Siwalik Hills experience Koeppen’s Cwg category climate based on annual and monthly means of temperature and rainfall (Koeppen, 1936). The climatic data of Chandigarh suggests that the Chandigarh Siwalik Hills have BSh category climate. For general vegetation there are two major growth periods February to March (Spring) and rainy months of July and August. Leaf fall for non-evergreen vegetation is experienced during October to November (Autumn). Climate is monsoonal, average rainfall of the area is 1069 mm and major portion of the rainfall occurs during June to September. The year is divisible into three seasons, warm wet rainy season (June to September), cool dry winter season (October to March) and hot dry summer season (April to May).\r\nLand Cover\r\n\r\n\r\nShow code\r\n\r\n\r\n## data from ESA WorldCover 2020 \r\nmwls_lc <- raster(\"D:/spatial-data/gee/mwls-ESA_WorldCover_2020.tif\")\r\n\r\n## a function to convert raster to dataframe\r\nrasterdf <- function(x, aggregate = 1){\r\n    resampleFactor <- aggregate\r\n    inputRaster <- x    \r\n    inCols <- ncol(inputRaster)\r\n    inRows <- nrow(inputRaster)\r\n    \r\n    # Compute numbers of columns and rows in the new raster for mapping\r\n    resampledRaster <- raster(ncol = (inCols / resampleFactor),\r\n                              nrow = (inRows / resampleFactor))\r\n    \r\n    # Match to the extent of the original raster\r\n    extent(resampledRaster) <- extent(inputRaster)\r\n   \r\n    # Resample data on the new raster\r\n    y <- resample(inputRaster, resampledRaster, method='ngb')\r\n   \r\n    # Extract cell coordinates  \r\n    coords <- xyFromCell(y, seq_len(ncell(y)))\r\n    dat <- stack(as.data.frame(getValues(y)))\r\n    \r\n    # Add names - 'value' for data, 'variable' to indicate different raster layers\r\n    # in a stack\r\n    names(dat) <- c('value', 'variable')\r\n    dat <- cbind(coords, dat)\r\n    dat\r\n}\r\n\r\n## convert raster to data frame\r\nmwls_df <- rasterdf(mwls_lc)\r\n\r\n## prepare legend\r\nLCcodes <- c(seq(10, 90, 10), 95, 100)\r\nLCnames <- c(\"Trees\", \"Shrubland\", \"Grassland\", \"Cropland\", \"Built-up\", \r\n             \"Barren/Sparse Vegetation\", \"Snow and Ice\", \"Open water\",\r\n             \"Herbaceous wetland\", \"Mangroves\", \"Moss and lichen\")\r\nLCcolors <- attr(mwls_lc, \"legend\")@colortable[LCcodes + 1]\r\nnames(LCcolors) <- as.character(LCcodes)\r\n\r\n## plot the map\r\nggplot(data = mwls_df) +\r\n  geom_raster(aes(x = x, y = y, fill = as.character(value))) + \r\n  scale_fill_manual(name = \"Land cover\",\r\n                    values = LCcolors[-c(7, 9:11)],\r\n                    labels = LCnames[-c(7, 9:11)],\r\n                    na.translate = FALSE) +\r\n  coord_sf(expand = F) +\r\n  theme(axis.title.x = element_blank(),\r\n        axis.title.y = element_blank(),\r\n        panel.background = element_rect(fill = \"white\", color = \"black\"))\r\n\r\n\r\n\r\n\r\nFigure 4: Land cover at Khol Hi Raitan wildlife sanctuary. Data source: ESA WorldCover 2020\r\n\r\n\r\n\r\nShow code\r\n\r\n\r\n## remove all variables from the environment\r\n#rm(list = ls())\r\n\r\n\r\n\r\n\r\n\r\nShow code\r\n\r\nlibrary(raster)\r\nlibrary(rasterVis)\r\n\r\n## data from ESA WorldCover 2020 \r\nmwls_lc <- raster(\"D:/spatial-data/gee/mwls-ESA_WorldCover_2020.tif\")\r\n\r\nlevels(mwls_lc) <- data.frame(\r\n    ID = c(seq(10, 60, 10), 80),\r\n    landcover = c(\"Trees\", \"Shrubland\", \"Grassland\", \"Cropland\", \"Built-up\", \r\n             \"Barren/Sparse \\n Vegetation\", \"Open water\")\r\n    )\r\n\r\nlevelplot(mwls_lc, att='landcover',\r\n          col.regions = c(\"#006400\", \"#FFBB22\", \"#FFFF4C\", \"#F096FF\", \"#FA0000\", \r\n                          \"#B4B4B4\", \"#0064C8\"),\r\n          colorkey = list(height = 1, labels = list(cex = 1.2)))\r\n\r\n\r\n\r\n\r\nEcology\r\nThe forest floor litter mass, litter fall, herbaceous biomass and the nutrient content of litter showed significant seasonal variations due to site and tissues in subtropical forest ecosystems of Siwalik hills (Rout and Gupta 1990a). Litter chemical quality controls the rate of leaf-litter decomposition measured as carbon dioxide evolution rates from the soil (Rout and Gupta 1987). Attempts have been made to estimate above ground biomass using Spectral modelling (R. Kumar et al. 2011).\r\nEcological Problems\r\nThreats\r\nWorld Herbal Project\r\nhttps://www.business-standard.com/article/news-ani/haryana-cm-inaugurates-patanjali-s-world-herbal-forest-project-118122000628_1.html\r\nhttps://economictimes.indiatimes.com/news/politics-and-nation/haryana-signs-mou-with-patanjali-for-world-herbal-forest/articleshow/56648056.cms\r\nhttps://www.dailypioneer.com/2016/state-editions/10l-plants-of-20-varieties-to-be-planted-in-world-herbal-forest.html\r\n\r\n\r\n\r\nBalkrishna, A., A. Srivastava, B. K. Shukla, R. K. Mishra, and B. Joshi. 2018. “Effect of Chemical Composition on Leaf-Litter Decomposition in Forest Soil.” Journal of Non-Timber Forest Products 25 (1): 1–14.\r\n\r\n\r\nChand, P. 2015. “Local People’s Perceptions Toward Tourism: A Case Study of Morni Hills (Haryana).” Asia Pacific Journal of Research 1: 70–77. https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.1061.4492&rep=rep1&type=pdf.\r\n\r\n\r\nChopra, G., M. B. Bhoombak, and P. Kumar. 2012. “Selection and Shifting of Sleeping Sites by Hanuman Langurs in Morni Hills of Haryana, India.” Zoo’s Print XXVII: 19--24. http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.729.2871&rep=rep1&type=pdf.\r\n\r\n\r\n———. 2013. “Prevalence of Non-Human Primates in Morni Hills of Haryana, India: A Survey.” Tigerpaper 40: 1--9. http://www.fao.org/3/an011e/an011e.pdf.\r\n\r\n\r\nChopra, G., and S. K. Sharma. 2014. “Avian Diversity of Lower Shivalik Foothills, India.” International Journal of Research Studies in Biosciences 2: 1--12. https://www.arcjournals.org/pdfs/ijrsb/v2-i7/1.pdf.\r\n\r\n\r\nJain, SP, DM Verma, SC Singh, JS Singh, and Sushil Kumar. 2000. “Flora of Haryana,” 113.\r\n\r\n\r\nKumar, R., R. L. Ahuja, N. T. Singh, and S. K. Ghabru. 1995. “Characteristics and Classification of Alkali Soils on Siwalik Hills of Satluj-Yamuna Divide, North-West India.” Agropedology 5: 29--35. http://isslup.in/wp-content/uploads/2018/09/Characteristics-and-Classification-of-Alkali-Soils-on-Siwalik-Hills.pdf.\r\n\r\n\r\nKumar, R., S. R. Gupta, S. Singh, P. Patil, and V. K. Dhadhwal. 2011. “Spatial Distribution of Forest Biomass Using Remote Sensing and Regression Models in Northern Haryana, India.” International Journal of Ecology and Environmental Sciences 37 (1): 37–47. https://nieindia.org/Journal/index.php/ijees/article/view/14/0.\r\n\r\n\r\nKumar, Shrawan. 2001. Flora of Haryana (Materials). Dehradun: Bishen Singh Mahendra Pal Singh.\r\n\r\n\r\nPruthi, N., G. D. Chawla, and S. Yadav. 2008. “Dyeing of Silk with Barberry Bark Dye Using Mordant Combination.” Natural Product Radiance 7: 40--44. http://nopr.niscair.res.in/handle/123456789/5643.\r\n\r\n\r\nPundir, A., S. Rajinder, and K. Sunil. 2014. “Measurement of Radon Concentration and Exhalation Rates in Soil Samples of Some Districts of Haryana and Himachal in India.” Researcher 6: 71--76. https://doi.org/10.7537/marsrsj060614.14.\r\n\r\n\r\nRout, S. K., and S. R. Gupta. 1987. “Effect of Chemical Composition on Leaf-Litter Decomposition in Forest Soil.” Proceedings / Indian Academy of Sciences 97 (5): 399–404. https://doi.org/10.1007/bf03053566.\r\n\r\n\r\n———. 1989. “Analysis of Forest Vegetation of Morni Hills in Northeast Haryana.” Proceedings / Indian Academy of Sciences 99 (2): 117–26. https://doi.org/10.1007/bf03053523.\r\n\r\n\r\n———. 1990a. “Forest Floor, Litterfall and Nutrient Return in Subtropical Forest Ecosystems of Siwaliks in Northern India. I. Forest Floor Litter and Herbaceous Biomass.” Flora 184 (5): 325–39. https://doi.org/10.1016/s0367-2530(17)31631-6.\r\n\r\n\r\n———. 1990b. “Forest Floor, Litterfall and Nutrient Return in Subtropical Forest Ecosystems of Siwaliks in Northern India II. Litterfall Pattern and Nutrient Turnover Rates.” Flora 184 (6): 405–21. https://doi.org/10.1016/s0367-2530(17)31643-2.\r\n\r\n\r\nSaini, Ekta, V. P. Khanagwal, and Rajvinder Singh. 2017. “A Systematic Databasing of Diatoms from Different Geographical Localities and Sites of Haryana for Advancing Validation of Forensic Diatomology.” Data in Brief 10 (February): 63–68. https://doi.org/10.1016/j.dib.2016.11.072.\r\n\r\n\r\nSarkar, S., and V. Prasad. 2000. “Palynostratigraphy and Depositional Environment of the Subathu Formation (Late Ypresian-Middle Lutetian), Morni Hills, Haryana, India.” Journal of the Palaeontological Society of India 45: 137--149. http://www.palaeontologicalsociety.in/vol45/v9.pdf.\r\n\r\n\r\nScott, Christopher Anand, and Michael F. Walter. 1993. “Local Knowledge and Conventional Soil Science Approaches to Erosional Processes in the Shivalik Himalaya.” Mountain Research and Development 13 (1): 61–72. https://doi.org/10.2307/3673644.\r\n\r\n\r\nSingh, J., A. Singh, and V. Laxmi. 2017. “Appraisal of Non-Timber Forest Products in Morni and Raipur Rani Ranges of Shivalik Hills, India.” International Journal of Forest Usufructs Management 18: 2--13.\r\n\r\n\r\nSingh, Joga, Harmanjit Singh, Surinder Singh, and B. S. Bajwa. 2008a. “Estimation of Uranium and Radon Concentration in Some Drinking Water Samples.” Radiation Measurements 43: S523–26. https://doi.org/10.1016/j.radmeas.2008.04.004.\r\n\r\n\r\n———. 2008b. “Estimation of Uranium and Radon Concentration in Some Drinking Water Samples of Upper Siwaliks, India.” Environmental Monitoring and Assessment 154 (1-4): 15–22. https://doi.org/10.1007/s10661-008-0373-8.\r\n\r\n\r\n———. 2009. “Uranium, Radium and Radon Exhalation Studies in Some Soil Samples Using Plastic Track Detectors.” Indian Journal of Physics 83 (8): 1147–53. https://doi.org/10.1007/s12648-009-0094-z.\r\n\r\n\r\nSingh, Omvir, Tejpal Sharma, and Jagdeep Singh. 2016. “Farmers’ Perceptions and Satisfaction Levels on the Performance of Watershed Development Activities in the Morni Hill Area of the Siwalik Himalayas in India.” Human Ecology 44 (1): 91–104. https://doi.org/10.1007/s10745-015-9801-x.\r\n\r\n\r\nSingh, S., D. R. Batish, R. K. Kohli, and H. P. Singh. 2014. “An Evaluation of the Antioxidant Properties of Some Oil Yielding Lamiaceous Plants from Morni Hills (Haryana, India ).” International Journal of Pharmacognosy 1: 640--645. https://doi.org/10.13040/IJPSR.0975-8232.IJP.1(10).640-45.\r\n\r\n\r\nSingh, Y. 2001. “Geo-Ecology of the Trans Satluj Punjab - Haryana Siwalik Hills, NW India.” ENVIS Bulletin: Himalayan Ecology and Development 9: 19--38. http://gbpihedenvis.nic.in/ENVIS%20Bullitin/Vol.%209/vol9_2.PDF.\r\n\r\n\r\n———. 2002. “Siltation Problems in Sukhna Lake in Chandigarh, NW India and Comments on Geohydrological Changes in the Yamuna-Satluj Region.” ENVIS Bulletin: Himalayan Ecology and Development 10: 18--31. http://www.indiaenvironmentportal.org.in/files/sukhna%20lake.pdf.\r\n\r\n\r\nVij, S. P., and J. Verma. 2005. “Eulophia Dabia (d.don) Hochr.: A New Orchid Record for Haryana State, India.” Journal of the Orchid Society of India 19: 47--49.\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-08-27-mwls/data/mwls-map-2009.jpg",
    "last_modified": "2021-10-24T02:56:08+05:30",
    "input_file": "mwls.knit.md"
  },
  {
    "path": "posts/2021-07-21-3d-map/",
    "title": "3d-map",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Abhishek Kumar",
        "url": "https://akumar.netlify.app"
      }
    ],
    "date": "2021-08-21",
    "categories": [],
    "contents": "\r\n\r\nContents\r\nload the reuired packages\r\n\r\nThe R package rayshader uses different hill shading techniques by calculating a colour for each point on the surface using:\r\nA direct elevation-to-colour mapping: height_shade()\r\nThe surface normals and hemispherical UV mapping: sphere_shade()\r\nLambert Shading Mapping by calculating the dot product between light direction and the surface normal vector: lamb_shade()\r\nshadows calculated by Leland Brown’s “texture shading” method: texture_shade(). This better defines ridges and drainage networks\r\nAmbient occlusion layer darkens the valleys to account for less scattered atmospheric light reaching the valley floor: ambient_shade()\r\n\r\nload the reuired packages\r\n\r\n\r\nlibrary(dplyr)\r\nlibrary(ggplot2)\r\nlibrary(osmdata)\r\nlibrary(raster)\r\nlibrary(rayshader)\r\nlibrary(sf)\r\nlibrary(tmap)\r\n\r\n\r\n\r\nload the elevation data for area of interest and convert to a matrix\r\n\r\n\r\ndem <- raster(\"D:/spatial-data/dem/n30_e076_1arc_v3.tif\") |>\r\n  merge(raster(\"D:/spatial-data/dem/n30_e077_1arc_v3.tif\")) |> \r\n  crop(extent(76.8, 77.1, 30.6, 30.9))\r\n\r\ndem_mat <- raster_to_matrix(dem)\r\n\r\n\r\n\r\nBuild a base map with rayshader\r\n\r\n\r\ndem_mat |> \r\n  height_shade() |> \r\n  plot_map()\r\n\r\n\r\n\r\n\r\nadd a spherical aspect shading colour\r\n\r\n\r\ndem_mat |> \r\n  height_shade() |> \r\n  add_overlay(\r\n    sphere_shade(dem_mat, texture = \"desert\", zscale=4, colorintensity = 5), \r\n    alphalayer=0.5) |>\r\n  plot_map()\r\n\r\n\r\n\r\n\r\noverlay a standard hillshade or Lambertian (cosine) shading\r\n\r\n\r\ndem_mat |> \r\n  height_shade() |> \r\n  add_overlay(\r\n    sphere_shade(dem_mat, texture = \"desert\", zscale = 4, colorintensity = 5), \r\n    alphalayer = 0.5) |>\r\n  add_shadow(lamb_shade(dem_mat, zscale = 6), 0) |>\r\n  plot_map()\r\n\r\n\r\n\r\n\r\nadd shadows calculated by Leland Brown’s “texture shading” method\r\n\r\n\r\ndem_mat |> \r\n  height_shade() |> \r\n  add_overlay(\r\n    sphere_shade(dem_mat, texture = \"desert\", zscale = 4, colorintensity = 5), \r\n    alphalayer = 0.5) |>\r\n  add_shadow(lamb_shade(dem_mat, zscale = 6), 0) |>\r\n  add_shadow(texture_shade(dem_mat, detail = 8/10, contrast = 9, brightness = 11), \r\n             0.1) |>\r\n  plot_map()\r\n\r\n\r\n\r\n\r\nadd an ambient occlusion layer\r\n\r\n\r\nbase_map <- dem_mat |> \r\n  height_shade() |> \r\n  add_overlay(\r\n    sphere_shade(dem_mat, texture = \"desert\", zscale = 4, colorintensity = 5), \r\n    alphalayer = 0.5) |>\r\n  add_shadow(lamb_shade(dem_mat, zscale = 6), 0) |>\r\n  add_shadow(ambient_shade(dem_mat), 0) %>%\r\n  add_shadow(texture_shade(dem_mat, detail = 8/10, contrast = 9, brightness = 11), \r\n             0.1)\r\nbase_map |> plot_map()\r\n\r\n\r\n\r\n\r\nextract major roads from osm and add them\r\n\r\n\r\n# define a bounding box for area of interest\r\nosm_bbox <- c(76.8, 30.6, 77.1, 30.9) # xmin, ymin, xmax, ymax\r\n\r\n# extract highway from osm\r\n#dem_highway <- opq(osm_bbox) |> \r\n  #add_osm_feature(key = \"highway\") |> \r\n  #osmdata_sf()\r\n\r\n# filter major roads\r\n#trunk_roads <- dem_highway$osm_lines |> filter(highway == \"trunk\")\r\n#secondary_roads <- dem_highway$osm_lines |> filter(highway == \"secondary\")\r\n#st_write(trunk_roads, \"data/trunk_road.gpkg\")\r\n#st_write(secondary_roads, \"data/secondary_road.gpkg\")\r\n\r\ntrunk_roads <- st_read(\"data/trunk_road.gpkg\")\r\n\r\n\r\nReading layer `trunk_road' from data source \r\n  `D:\\R\\abhikumar86.github.io\\_posts\\2021-07-21-3d-map\\data\\trunk_road.gpkg' \r\n  using driver `GPKG'\r\nSimple feature collection with 188 features and 32 fields\r\nGeometry type: LINESTRING\r\nDimension:     XY\r\nBounding box:  xmin: 76.78954 ymin: 30.58918 xmax: 77.1175 ymax: 30.91891\r\nGeodetic CRS:  WGS 84\r\n\r\nsecondary_roads <- st_read(\"data/secondary_road.gpkg\")\r\n\r\n\r\nReading layer `secondary_road' from data source \r\n  `D:\\R\\abhikumar86.github.io\\_posts\\2021-07-21-3d-map\\data\\secondary_road.gpkg' \r\n  using driver `GPKG'\r\nSimple feature collection with 126 features and 32 fields\r\nGeometry type: LINESTRING\r\nDimension:     XY\r\nBounding box:  xmin: 76.75612 ymin: 30.59039 xmax: 77.12317 ymax: 30.9053\r\nGeodetic CRS:  WGS 84\r\n\r\n# remove dem_highway\r\nrm(dem_highway)\r\n\r\n# prepare the road layer for overlaying\r\nroads_layer <- generate_line_overlay(trunk_roads, extent = extent(76.8, 77.1, 30.6, 30.9),\r\n                          heightmap = dem_mat,\r\n                          linewidth = 5, color = \"white\") |>\r\n  add_overlay(\r\n    generate_line_overlay(secondary_roads, extent = extent(76.8, 77.1, 30.6, 30.9),\r\n                          heightmap = dem_mat,\r\n                          linewidth = 2.5, color = \"white\"))\r\n# add to base map\r\nbase_map |>\r\n  add_overlay(roads_layer) |>\r\n  plot_map()\r\n\r\n\r\n\r\n\r\nsimilarly extract waterways from osm and add them to base-map\r\n\r\n\r\n# define a bounding box for area of interest\r\nosm_bbox <- c(76.8, 30.6, 77.1, 30.9) # xmin, ymin, xmax, ymax\r\n\r\n# extract waterway (rivers) from osm\r\n#dem_water <- opq(osm_bbox) |> \r\n  #add_osm_feature(key = \"waterway\") |> \r\n  #osmdata_sf()\r\n\r\n# filter major river and streams\r\n#rivers <- dem_water$osm_lines |> filter(waterway == \"river\")\r\n#streams <- dem_water$osm_lines |> filter(waterway != \"river\")\r\n#st_write(rivers, \"data/rivers.gpkg\")\r\n#st_write(streams, \"data/streams.gpkg\")\r\n\r\nrivers <- st_read(\"data/rivers.gpkg\")\r\n\r\n\r\nReading layer `rivers' from data source \r\n  `D:\\R\\abhikumar86.github.io\\_posts\\2021-07-21-3d-map\\data\\rivers.gpkg' \r\n  using driver `GPKG'\r\nSimple feature collection with 30 features and 16 fields\r\nGeometry type: LINESTRING\r\nDimension:     XY\r\nBounding box:  xmin: 74.56863 ymin: 29.4721 xmax: 77.11868 ymax: 30.91332\r\nGeodetic CRS:  WGS 84\r\n\r\nstreams <- st_read(\"data/streams.gpkg\")\r\n\r\n\r\nReading layer `streams' from data source \r\n  `D:\\R\\abhikumar86.github.io\\_posts\\2021-07-21-3d-map\\data\\streams.gpkg' \r\n  using driver `GPKG'\r\nSimple feature collection with 41 features and 16 fields\r\nGeometry type: LINESTRING\r\nDimension:     XY\r\nBounding box:  xmin: 73.5626 ymin: 29.22947 xmax: 77.07197 ymax: 30.8885\r\nGeodetic CRS:  WGS 84\r\n\r\n# remove dem_water\r\n#rm(dem_water)\r\n\r\n# prepare the river and stream layer for overlaying\r\nstream_layer <- generate_line_overlay(rivers, extent = extent(76.8, 77.1, 30.6, 30.9),\r\n                          heightmap = dem_mat, linewidth = 8, color = \"skyblue2\") |>\r\n  add_overlay(\r\n    generate_line_overlay(streams, extent = extent(76.8, 77.1, 30.6, 30.9),\r\n                          heightmap = dem_mat, linewidth = 4, color = \"skyblue\"))\r\n# add to base map\r\nbase_map |>\r\n  add_overlay(stream_layer, alphalayer = 0.8) |>\r\n  add_overlay(roads_layer) |>\r\n  plot_map()\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-07-21-3d-map/3d-map_files/figure-html5/unnamed-chunk-3-1.png",
    "last_modified": "2021-07-23T01:04:04+05:30",
    "input_file": {},
    "preview_width": 1248,
    "preview_height": 768
  },
  {
    "path": "posts/2021-08-13-ecology-packages/",
    "title": "R packages for Ecology",
    "description": "A list of useful R packages for ecology, biodiversity and conservation.",
    "author": [
      {
        "name": "Abhishek Kumar",
        "url": "https://akumar.netlify.app"
      }
    ],
    "date": "2021-08-13",
    "categories": [],
    "contents": "\r\n\r\n\r\nPackage\r\n\r\n\r\nDescription\r\n\r\n\r\nReference\r\n\r\n\r\nLinks\r\n\r\n\r\nadiv\r\n\r\n\r\nanalyse biodiversity in ecology\r\n\r\n\r\nPavoine (2020)\r\n\r\n\r\n\r\n\r\nBAT\r\n\r\n\r\nmeasurement and estimation of alpha and beta taxon, phylogenetic and functional diversity\r\n\r\n\r\nCardoso, Rigal, and Carvalho (2014)\r\n\r\n\r\n\r\n\r\nbetapart\r\n\r\n\r\npartitioning beta diversity into turnover and nestedness components\r\n\r\n\r\nBaselga and Orme (2012)\r\n\r\n\r\n\r\n\r\nbien\r\n\r\n\r\nBotanical Information and Ecology Network (BIEN) database\r\n\r\n\r\nMaitner et al. (2017)\r\n\r\n\r\n\r\n\r\nbiodivMapR\r\n\r\n\r\nmapping \\(\\alpha\\) and \\(\\beta\\) diversity from remotely sensed images\r\n\r\n\r\nFéret and Boissieu (2019)\r\n\r\n\r\nhttps://jbferet.github.io/biodivMapR/\r\n\r\n\r\nbiomass\r\n\r\n\r\nestimating above-ground biomass and its uncertainty in tropical forests\r\n\r\n\r\nRéjou-Méchain et al. (2017)\r\n\r\n\r\n\r\n\r\nConR\r\n\r\n\r\nlarge-scale multispecies preliminary conservation assessments using distribution data\r\n\r\n\r\nDauby et al. (2017)\r\n\r\n\r\n\r\n\r\necospat\r\n\r\n\r\nspatial analyses and modeling of species niches and distributions\r\n\r\n\r\nCola et al. (2017)\r\n\r\n\r\nhttps://www.unil.ch/ecospat/home/menuguid/ecospat-resources/tools.html\r\n\r\n\r\nDistance\r\n\r\n\r\nDistance Sampling Detection Function and Abundance Estimation\r\n\r\n\r\nMiller et al. (2019)\r\n\r\n\r\nhttps://distancesampling.org/\r\n\r\n\r\nENMTools\r\n\r\n\r\ntoolbox for ecological niche modelling in comparative ecological biogeography\r\n\r\n\r\nWarren et al. (2021)\r\n\r\n\r\nhttps://github.com/danlwarren/ENMTools\r\n\r\n\r\nForestFit\r\n\r\n\r\nbayesian modeling for plant height diameter data\r\n\r\n\r\nTeimouri, Doser, and Finley (2020)\r\n\r\n\r\n\r\n\r\nForestGapR\r\n\r\n\r\nforest gap analysis from canopy height models\r\n\r\n\r\nSilva et al. (2019)\r\n\r\n\r\n\r\n\r\nGapAnalysis\r\n\r\n\r\ncalculation of conservation indicators using spatial information\r\n\r\n\r\nCarver et al. (2021)\r\n\r\n\r\nhttps://github.com/CIAT-DAPA/GapAnalysis\r\n\r\n\r\ngeodiv\r\n\r\n\r\ngradient surface metrics to provide continuous measures of landscape heterogeneity\r\n\r\n\r\nSmith et al. (2021)\r\n\r\n\r\n\r\n\r\ngeoorigin\r\n\r\n\r\ntrait mapping and geographic provenancing of specimens without categorical constraints\r\n\r\n\r\nHulme-Beaman et al. (2020)\r\n\r\n\r\n\r\n\r\nGerminaR\r\n\r\n\r\ngermination analysis for plants\r\n\r\n\r\nLozano-Isla, Benites-Alfaro, and Pompelli (2019)\r\n\r\n\r\n\r\n\r\nHistMapR\r\n\r\n\r\nRapid digitization of historical land-use maps in R\r\n\r\n\r\nAuffret et al. (2017)\r\n\r\n\r\nhttps://github.com/AGAuffret/HistMapR\r\n\r\n\r\nHmsc\r\n\r\n\r\nHierarchical Modelling of Species Communities with Joint species distribution models\r\n\r\n\r\nTikhonov et al. (2020)\r\n\r\n\r\nhttps://github.com/hmsc-r/HMSC\r\n\r\n\r\nletsR\r\n\r\n\r\ndata handling and analysis in macroecology\r\n\r\n\r\nVilela and Villalobos (2015)\r\n\r\n\r\n\r\n\r\nMBHdesign\r\n\r\n\r\nEfficient spatial survey design\r\n\r\n\r\nFoster (2020)\r\n\r\n\r\n\r\n\r\nMIAmaxent\r\n\r\n\r\nVariable transformation and model selection for species distribution models\r\n\r\n\r\nVollering, Halvorsen, and Mazzoni (2019)\r\n\r\n\r\n\r\n\r\nmobsim\r\n\r\n\r\nsimulation and measurement of biodiversity across spatial scales\r\n\r\n\r\nMay et al. (2018)\r\n\r\n\r\n\r\n\r\nNicheMapR\r\n\r\n\r\nbiophysical modelling: the microclimate model\r\n\r\n\r\nKearney and Porter (2016)\r\n\r\n\r\nhttps://mrke.github.io/\r\n\r\n\r\nnlstimedist\r\n\r\n\r\nquantification of unimodal phenology distributions\r\n\r\n\r\nSteer, Ramsay, and Franco (2019)\r\n\r\n\r\n\r\n\r\nntbox\r\n\r\n\r\nmodelling and evaluating multidimensional ecological niches\r\n\r\n\r\nOsorio-Olvera et al. (2020)\r\n\r\n\r\nhttps://luismurao.github.io/ntbox_user_guide.html\r\n\r\n\r\nphyloregion\r\n\r\n\r\nbiogeographical regionalization and macroecology\r\n\r\n\r\nDaru, Karunarathne, and Schliep (2020)\r\n\r\n\r\nhttps://phyloregion.com/\r\n\r\n\r\nphyr\r\n\r\n\r\nphylogenetic species-distribution modelling in ecological communities\r\n\r\n\r\nLi et al. (2020)\r\n\r\n\r\nhttps://daijiang.github.io/phyr/\r\n\r\n\r\nR2MCDS\r\n\r\n\r\nanalysis of multi-species datasets collected using distance sampling\r\n\r\n\r\nBolduc, Roy, and Rousseu (2018)\r\n\r\n\r\nhttps://github.com/RoyChristian/R2MCDS\r\n\r\n\r\nRangeShiftR\r\n\r\n\r\nindividual-based simulation of spatial eco-evolutionary dynamics and species’ responses to environmental changes\r\n\r\n\r\nMalchow et al. (2021)\r\n\r\n\r\nhttps://rangeshifter.github.io/RangeshiftR-tutorials/\r\n\r\n\r\nrasterdiv\r\n\r\n\r\nmeasuring ecosystem heterogeneity from space\r\n\r\n\r\nRocchini et al. (2021)\r\n\r\n\r\nhttps://github.com/mattmar/rasterdiv\r\n\r\n\r\nred\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nsars\r\n\r\n\r\nfitting, evaluating and comparing species–area relationship models\r\n\r\n\r\nMatthews et al. (2019)\r\n\r\n\r\n\r\n\r\nsegRDA\r\n\r\n\r\npiecewise redundancy analysis\r\n\r\n\r\nVieira et al. (2019)\r\n\r\n\r\n\r\n\r\nspatialwarnings\r\n\r\n\r\nMonitoring ecosystem degradation using spatial data\r\n\r\n\r\nGénin et al. (2018)\r\n\r\n\r\n\r\n\r\nssdm\r\n\r\n\r\npredict distribution of species richness and composition based on stacked species distribution models\r\n\r\n\r\nSchmitt et al. (2017)\r\n\r\n\r\nhttps://github.com/sylvainschmitt/SSDM\r\n\r\n\r\nSSP\r\n\r\n\r\nestimation of sampling effort in studies of ecological communities\r\n\r\n\r\nGuerra-Castro et al. (2021)\r\n\r\n\r\nhttps://github.com/edlinguerra/SSP\r\n\r\n\r\nV.PhyloMaker\r\n\r\n\r\ngenerate very large phylogenies for vascular plants\r\n\r\n\r\nJin and Qian (2019)\r\n\r\n\r\n\r\n\r\nVoCC\r\n\r\n\r\nvelocity of climate change and related climatic metrics\r\n\r\n\r\nMolinos et al. (2019)\r\n\r\n\r\n\r\n\r\nwallace\r\n\r\n\r\nreproducible modeling of species niches and distributions\r\n\r\n\r\nKass et al. (2018)\r\n\r\n\r\nhttps://wallaceecomod.github.io/\r\n\r\n\r\nzoon\r\n\r\n\r\nreproducible and shareable species distribution modelling\r\n\r\n\r\nGolding et al. (2017)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nAuffret, Alistair G., Adam Kimberley, Jan Plue, Helle Skånes, Simon Jakobsson, Emelie Waldén, Marika Wennbom, et al. 2017. “HistMapR: Rapid Digitization of Historical Land-Use Maps in R.” Methods in Ecology and Evolution 8 (11): 1453–57. https://doi.org/10.1111/2041-210x.12788.\r\n\r\n\r\nBaselga, Andrés, and C. David L. Orme. 2012. “betapart: An R Package for the Study of Beta Diversity.” Methods in Ecology and Evolution 3 (5): 808–12. https://doi.org/10.1111/j.2041-210x.2012.00224.x.\r\n\r\n\r\nBolduc, François, Christian Roy, and François Rousseu. 2018. “R2mcds: An R Package for the Analysis of Multi-Species Datasets Collected Using Distance Sampling.” Ecological Informatics 47: 23–25. https://doi.org/10.1016/j.ecoinf.2017.10.003.\r\n\r\n\r\nCardoso, Pedro, François Rigal, and José C. Carvalho. 2014. “BAT Biodiversity Assessment Tools, an R Package for the Measurement and Estimation of Alpha and Beta Taxon, Phylogenetic and Functional Diversity.” Methods in Ecology and Evolution 6 (2): 232–36. https://doi.org/10.1111/2041-210x.12310.\r\n\r\n\r\nCarver, Daniel, Chrystian C. Sosa, Colin K. Khoury, Harold A. Achicanoy, Maria Victoria Diaz, Steven Sotelo, Nora P. Castañeda-Álvarez, and Julian Ramirez-Villegas. 2021. “GapAnalysis: An R Package to Calculate Conservation Indicators Using Spatial Information.” Ecography 44 (7): 1000–1009. https://doi.org/10.1111/ecog.05430.\r\n\r\n\r\nCola, Valeria Di, Olivier Broennimann, Blaise Petitpierre, Frank T. Breiner, Manuela DAmen, Christophe Randin, Robin Engler, et al. 2017. “ecospat: An R Package to Support Spatial Analyses and Modeling of Species Niches and Distributions.” Ecography 40 (6): 774–87. https://doi.org/10.1111/ecog.02671.\r\n\r\n\r\nDaru, Barnabas H., Piyal Karunarathne, and Klaus Schliep. 2020. “phyloregion: R Package for Biogeographical Regionalization and Macroecology.” Methods in Ecology and Evolution 11 (11): 1483–91. https://doi.org/10.1111/2041-210x.13478.\r\n\r\n\r\nDauby, Gilles, Tariq Stévart, Vincent Droissart, Ariane Cosiaux, Vincent Deblauwe, Murielle Simo-Droissart, Marc S. M. Sosef, et al. 2017. “ConR: An R Package to Assist Large-Scale Multispecies Preliminary Conservation Assessments Using Distribution Data.” Ecology and Evolution 7 (24): 11292–303. https://doi.org/10.1002/ece3.3704.\r\n\r\n\r\nFéret, Jean-Baptiste, and Florian Boissieu. 2019. “biodivMapR: An R Package for \\(\\alpha\\)- and \\(\\beta\\)-Diversity Mapping Using Remotely Sensed Images.” Methods in Ecology and Evolution 11 (1): 64–70. https://doi.org/10.1111/2041-210x.13310.\r\n\r\n\r\nFoster, Scott D. 2020. “MBHdesign: An R-package for Efficient Spatial Survey Designs.” Methods in Ecology and Evolution 12 (3): 415–20. https://doi.org/10.1111/2041-210x.13535.\r\n\r\n\r\nGénin, Alexandre, Sabiha Majumder, Sumithra Sankaran, Alain Danet, Vishwesha Guttal, Florian D. Schneider, and Sonia Kéfi. 2018. “Monitoring Ecosystem Degradation Using Spatial Data and the R Package spatialwarnings.” Methods in Ecology and Evolution 9 (10): 2067–75. https://doi.org/10.1111/2041-210x.13058.\r\n\r\n\r\nGolding, Nick, Tom A. August, Tim C. D. Lucas, David J. Gavaghan, E. Emiel Loon, and Greg McInerny. 2017. “The zoon R Package for Reproducible and Shareable Species Distribution Modelling.” Methods in Ecology and Evolution 9 (2): 260–68. https://doi.org/10.1111/2041-210x.12858.\r\n\r\n\r\nGuerra-Castro, Edlin J., Juan Carlos Cajas, Nuno Simões, Juan J. Cruz-Motta, and Maite Mascaró. 2021. “SSP: An R Package to Estimate Sampling Effort in Studies of Ecological Communities.” Ecography 44 (4): 561–73. https://doi.org/10.1111/ecog.05284.\r\n\r\n\r\nHulme-Beaman, Ardern, Anna Rudzinski, Joseph E. J. Cooper, Robert F. Lachlan, Keith Dobney, and Mark G. Thomas. 2020. “geoorigins: A New Method and R Package for Trait Mapping and Geographic Provenancing of Specimens Without Categorical Constraints.” Methods in Ecology and Evolution 11 (10): 1247–57. https://doi.org/10.1111/2041-210x.13444.\r\n\r\n\r\nJin, Yi, and Hong Qian. 2019. “V.PhyloMaker: An R Package That Can Generate Very Large Phylogenies for Vascular Plants.” Ecography 42 (8): 1353–59. https://doi.org/10.1111/ecog.04434.\r\n\r\n\r\nKass, Jamie M., Bruno Vilela, Matthew E. Aiello-Lammens, Robert Muscarella, Cory Merow, and Robert P. Anderson. 2018. “wallace: A Flexible Platform for Reproducible Modeling of Species Niches and Distributions Built for Community Expansion.” Methods in Ecology and Evolution 9 (4): 1151–56. https://doi.org/10.1111/2041-210x.12945.\r\n\r\n\r\nKearney, Michael R., and Warren P. Porter. 2016. “NicheMapR  an R Package for Biophysical Modelling: The Microclimate Model.” Ecography 40 (5): 664–74. https://doi.org/10.1111/ecog.02360.\r\n\r\n\r\nLi, Daijiang, Russell Dinnage, Lucas A. Nell, Matthew R. Helmus, and Anthony R. Ives. 2020. “phyr: An R Package for Phylogenetic Species-Distribution Modelling in Ecological Communities.” Methods in Ecology and Evolution 11 (11): 1455–63. https://doi.org/10.1111/2041-210x.13471.\r\n\r\n\r\nLozano-Isla, Flavio, Omar E. Benites-Alfaro, and Marcelo F. Pompelli. 2019. “GerminaR: An R Package for Germination Analysis with the Interactive Web Application “GerminaQuant for R”.” Ecological Research 34 (2): 339–46. https://doi.org/10.1111/1440-1703.1275.\r\n\r\n\r\nMaitner, Brian S., Brad Boyle, Nathan Casler, Rick Condit, John Donoghue, Sandra M. Durán, Daniel Guaderrama, et al. 2017. “The bien R Package: A Tool to Access the Botanical Information and Ecology Network (BIEN) Database.” Methods in Ecology and Evolution 9 (2): 373–79. https://doi.org/10.1111/2041-210x.12861.\r\n\r\n\r\nMalchow, Anne-Kathleen, Greta Bocedi, Stephen C. F. Palmer, Justin M. J. Travis, and Damaris Zurell. 2021. “RangeShiftR: An R Package for Individual-Based Simulation of Spatial Eco-Evolutionary Dynamics and Species Responses to Environmental Changes.” Ecography. https://doi.org/10.1111/ecog.05689.\r\n\r\n\r\nMatthews, Thomas J., Kostas A. Triantis, Robert J. Whittaker, and François Guilhaumon. 2019. “sars: An R Package for Fitting, Evaluating and Comparing Speciesarea Relationship Models.” Ecography 42 (8): 1446–55. https://doi.org/10.1111/ecog.04271.\r\n\r\n\r\nMay, Felix, Katharina Gerstner, Daniel J. McGlinn, Xiao Xiao, and Jonathan M. Chase. 2018. “mobsim: An R Package for the Simulation and Measurement of Biodiversity Across Spatial Scales.” Methods in Ecology and Evolution 9 (6): 1401–8. https://doi.org/10.1111/2041-210x.12986.\r\n\r\n\r\nMiller, David L., Eric Rexstad, Len Thomas, Laura Marshall, and Jeffrey L. Laake. 2019. “Distance Sampling in R.” Journal of Statistical Software 89 (1). https://doi.org/10.18637/jss.v089.i01.\r\n\r\n\r\nMolinos, Jorge Garcı́a, David S. Schoeman, Christopher J. Brown, and Michael T. Burrows. 2019. “VoCC: An R Package for Calculating the Velocity of Climate Change and Related Climatic Metrics.” Methods in Ecology and Evolution 10 (12): 2195–2202. https://doi.org/10.1111/2041-210x.13295.\r\n\r\n\r\nOsorio-Olvera, Luis, Andrés Lira-Noriega, Jorge Soberón, Andrew Townsend Peterson, Manuel Falconi, Rusby G. Contreras-Dı́az, Enrique Martı́nez-Meyer, Vijay Barve, and Narayani Barve. 2020. “ntbox: An R Package with Graphical User Interface for Modelling and Evaluating Multidimensional Ecological Niches.” Methods in Ecology and Evolution 11 (10): 1199–1206. https://doi.org/10.1111/2041-210x.13452.\r\n\r\n\r\nPavoine, Sandrine. 2020. “adiv: An R Package to Analyse Biodiversity in Ecology.” Methods in Ecology and Evolution 11 (9): 1106–12. https://doi.org/10.1111/2041-210x.13430.\r\n\r\n\r\nRéjou-Méchain, Maxime, Ariane Tanguy, Camille Piponiot, Jérôme Chave, and Bruno Hérault. 2017. “biomass: An R Package for Estimating Above-Ground Biomass and Its Uncertainty in Tropical Forests.” Methods in Ecology and Evolution 8 (9): 1163–67. https://doi.org/10.1111/2041-210x.12753.\r\n\r\n\r\nRocchini, Duccio, Elisa Thouverai, Matteo Marcantonio, Martina Iannacito, Daniele Da Re, Michele Torresani, Giovanni Bacaro, et al. 2021. “rasterdivan Information Theory Tailored R Package for Measuring Ecosystem Heterogeneity from Space: To the Origin and Back.” Methods in Ecology and Evolution 12 (6): 1093–1102. https://doi.org/10.1111/2041-210x.13583.\r\n\r\n\r\nSchmitt, Sylvain, Robin Pouteau, Dimitri Justeau, Florian Boissieu, and Philippe Birnbaum. 2017. “ssdm: An R Package to Predict Distribution of Species Richness and Composition Based on Stacked Species Distribution Models.” Methods in Ecology and Evolution 8 (12): 1795–1803. https://doi.org/10.1111/2041-210x.12841.\r\n\r\n\r\nSilva, Carlos A., Ruben Valbuena, Ekena R. Pinagé, Midhun Mohan, Danilo R. A. Almeida, Eben North Broadbent, Wan Shafrina Wan Mohd Jaafar, Daniel Papa, Adrian Cardil, and Carine Klauberg. 2019. “ForestGapR: An R Package for Forest Gap Analysis from Canopy Height Models.” Methods in Ecology and Evolution 10 (8): 1347–56. https://doi.org/10.1111/2041-210x.13211.\r\n\r\n\r\nSmith, Annie C., Kyla M. Dahlin, Sydne Record, Jennifer K. Costanza, Adam M. Wilson, and Phoebe L. Zarnetske. 2021. “The geodiv R Package: Tools for Calculating Gradient Surface Metrics.” Methods in Ecology and Evolution. https://doi.org/10.1111/2041-210x.13677.\r\n\r\n\r\nSteer, Nicola C., Paul M. Ramsay, and Miguel Franco. 2019. “nlstimedist: An R Package for the Biologically Meaningful Quantification of Unimodal Phenology Distributions.” Methods in Ecology and Evolution 10 (11): 1934–40. https://doi.org/10.1111/2041-210x.13293.\r\n\r\n\r\nTeimouri, Mahdi, Jeffrey W. Doser, and Andrew O. Finley. 2020. “ForestFit: An R Package for Modeling Plant Size Distributions.” Environmental Modelling & Software 131: 104668. https://doi.org/10.1016/j.envsoft.2020.104668.\r\n\r\n\r\nTikhonov, Gleb, Øystein H. Opedal, Nerea Abrego, Aleksi Lehikoinen, Melinda M. J. Jonge, Jari Oksanen, and Otso Ovaskainen. 2020. “Joint Species Distribution Modelling with the R-package Hmsc.” Methods in Ecology and Evolution 11 (3): 442–47. https://doi.org/10.1111/2041-210x.13345.\r\n\r\n\r\nVieira, Danilo Cândido, Marco Colossi Brustolin, Fábio Cop Ferreira, and Gustavo Fonseca. 2019. “segRDA: An R Package for Performing Piecewise Redundancy Analysis.” Methods in Ecology and Evolution 10 (12): 2189–94. https://doi.org/10.1111/2041-210x.13300.\r\n\r\n\r\nVilela, Bruno, and Fabricio Villalobos. 2015. “letsR: A New R Package for Data Handling and Analysis in Macroecology.” Methods in Ecology and Evolution 6 (10): 1229–34. https://doi.org/10.1111/2041-210x.12401.\r\n\r\n\r\nVollering, Julien, Rune Halvorsen, and Sabrina Mazzoni. 2019. “The MIAmaxent R Package: Variable Transformation and Model Selection for Species Distribution Models.” Ecology and Evolution 9 (21): 12051–68. https://doi.org/10.1002/ece3.5654.\r\n\r\n\r\nWarren, Dan L., Nicholas J. Matzke, Marcel Cardillo, John B. Baumgartner, Linda J. Beaumont, Michael Turelli, Richard E. Glor, et al. 2021. “ENMTools 1.0: An R Package for Comparative Ecological Biogeography.” Ecography 44 (4): 504–11. https://doi.org/10.1111/ecog.05485.\r\n\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-10-17T19:57:56+05:30",
    "input_file": {}
  },
  {
    "path": "posts/2021-07-21-singrauli-map/",
    "title": "Singrauli Map",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Abhishek Kumar",
        "url": "https://akumar.netlify.app"
      }
    ],
    "date": "2021-07-21",
    "categories": [],
    "contents": "\r\n\r\nContents\r\nLoad the packages\r\nPrepare a base hillshade\r\nadd water element\r\nadd major roads\r\nadd coal mine boundaries\r\nprepare inset map\r\nfinal main map\r\narrange and save the final maps\r\n\r\n\r\nLoad the packages\r\n\r\n\r\nShow code\r\n\r\nlibrary(dplyr)\r\nlibrary(grid) # arranging inset maps\r\nlibrary(OpenStreetMap) # OSM Maps and data\r\nlibrary(osmdata) # osm data download\r\nlibrary(raster) # raster data and operations\r\nlibrary(sf) # simple features for spatial data\r\nlibrary(tmap) # thematic mapping\r\nlibrary(tmaptools) \r\n\r\n\r\n\r\nPrepare a base hillshade\r\n\r\n\r\nShow code\r\n\r\nbb <- c(82.48, 24.1, 82.8, 24.2) # extent for target site as left, bottom, right, upper\r\n\r\n#dem <- getData(name = \"SRTM\", lon = 84, lat = 24, path = \"./dem/\") # download data from SRTM\r\n\r\n#dem_crop <- dem %>% crop(extent(82.48, 82.8, 24.1, 24.2)) # cropped to target site\r\n#rm(dem) # remove dem from environment\r\n\r\n#slope <- terrain(dem_crop, opt= \"slope\") # extract slope from dem_crop\r\n#aspect <- terrain(dem_crop, opt= \"aspect\") # extract aspect from dem_crop\r\n#dem_hs <- hillShade(slope = slope, aspect = aspect, angle = 45, direction = 315) # prepare hill shade\r\n# 45 altitude angle and 315 azimuth angle\r\n\r\n#writeRaster(x = dem_hs, filename = \"./data/dem_hs.tif\", overwrite = T) # write to local directory\r\n#rm(slope, aspect) # removed slope and aspect files\r\n\r\nhs <- raster(\"./data/dem_hs.tif\") # read the hillshade file\r\n\r\ntm_shape(hs) + \r\n      tm_raster(palette = \"-Greys\", n = 100, style = \"cont\", alpha = 0.7,\r\n                         legend.show = FALSE)\r\n\r\n\r\n\r\n\r\nadd water element\r\n\r\n\r\nShow code\r\n\r\n# https://storage.googleapis.com/earthenginepartners-hansen/GFC-2019-v1.7/Hansen_GFC-2019-v1.7_datamask_30N_080E.tif\r\n\r\n#water <- raster(\"./data/Hansen_GFC2014_datamask_30N_080E.tif\") %>% \r\n      #crop(extent(82.48, 82.8, 24.1, 24.2)) %>% \r\n      #calc(fun = function(x){x[x == 1] <- NA; return(x)})\r\n#writeRaster(x = water, filename = \"./data/singrauli-water.tif\", overwrite = T) # write to local directory\r\n\r\nwater <- raster(\"./data/singrauli-water.tif\") # read the hillshade file\r\n\r\n# colors for water #4a80f5, #9bbff4, #a7cdf2, #AADAFF\r\n\r\ntm_shape(hs) + \r\n      tm_raster(palette = \"-Greys\", n = 100, style = \"cont\", alpha = 0.7,\r\n                         legend.show = FALSE) + # hillshade\r\n      tm_shape(water) + \r\n      tm_raster(palette = c(\"#9bbff4\"), style = \"cat\", legend.show = FALSE)  # water\r\n\r\n\r\n\r\n\r\nadd major roads\r\n\r\n\r\nShow code\r\n\r\n#s_roads <- opq(bbox = bb) %>% # xmin, ymin, xmax, ymax\r\n      #add_osm_feature(key = \"highway\", value = c(\"trunk\")) %>% \r\n      #osmdata_sf()\r\n#s_roads <- s_roads$osm_lines\r\n#st_write(s_roads, \"./data/singrauli-road/singrauli-road.shp\")\r\n\r\ns_roads <- st_read(\"./data/singrauli-road/singrauli-road.shp\")\r\n\r\n\r\nReading layer `singrauli-road' from data source \r\n  `D:\\R\\abhikumar86.github.io\\_posts\\2021-07-21-singrauli-map\\data\\singrauli-road\\singrauli-road.shp' \r\n  using driver `ESRI Shapefile'\r\nSimple feature collection with 30 features and 9 fields\r\nGeometry type: LINESTRING\r\nDimension:     XY\r\nBounding box:  xmin: 82.4536 ymin: 24.08979 xmax: 82.77473 ymax: 24.20791\r\nGeodetic CRS:  GCS_unknown\r\n\r\nShow code\r\n\r\ns_roads <- s_roads %>% st_set_crs(4326)\r\n\r\ntm_shape(hs) + tm_raster(palette = \"-Greys\", n = 100, style = \"cont\", alpha = 0.7,\r\n                         legend.show = FALSE) + # hillshade\r\n      \r\n      tm_shape(water) + tm_raster(palette = c(\"#9bbff4\"), style = \"cat\",  \r\n                            legend.show = FALSE) + # water\r\n      \r\n      tm_shape(s_roads) + tm_lines(col = \"ref\", palette = c(\"grey50\", \"grey40\"),\r\n                                   lwd = 2.5, legend.col.show = FALSE) # roads\r\n\r\n\r\n\r\n\r\nadd coal mine boundaries\r\n\r\n\r\nShow code\r\n\r\n#s_mines <- opq(bbox = bb) %>% # xmin, ymin, xmax, ymax\r\n       #add_osm_feature(key = \"landuse\", value = \"quarry\") %>% \r\n       #osmdata_sf()\r\n#s_mines <- s_mines$osm_polygons\r\n#st_write(s_mines, \"./data/singrauli-mines/singrauli-mines.shp\")\r\n\r\n# coal mines\r\ncm <- st_read(\"./data/singrauli-mines/singrauli-mines.shp\") \r\n\r\n\r\nReading layer `singrauli-mines' from data source \r\n  `D:\\R\\abhikumar86.github.io\\_posts\\2021-07-21-singrauli-map\\data\\singrauli-mines\\singrauli-mines.shp' \r\n  using driver `ESRI Shapefile'\r\nSimple feature collection with 10 features and 5 fields\r\nGeometry type: POLYGON\r\nDimension:     XY\r\nBounding box:  xmin: 82.54869 ymin: 24.11217 xmax: 82.77247 ymax: 24.21588\r\nGeodetic CRS:  GCS_unknown\r\n\r\nShow code\r\n\r\ncm$mine <- c(\"Khadia\", \"\", \"Bina\", \"Amlohri\", \"Dudhichua\", \"\", \r\n             \"Jhingurdah\", \"Kakri\", \"Nigahi\", \"Block-B\")\r\n\r\n# jayant mine\r\ncmj <- cm %>% dplyr::filter(name == \"Jayant Mine\") \r\ncmj$mine <- \"Jayant\"\r\n\r\ntm_shape(hs) + tm_raster(palette = \"-Greys\", n = 100, style = \"cont\", alpha = 0.7,\r\n                         legend.show = FALSE) + # hillshade\r\n      \r\n      tm_shape(water) + tm_raster(palette = c(\"#9bbff4\"), style = \"cat\",  \r\n                            legend.show = FALSE) + # water\r\n      \r\n      tm_shape(s_roads) + tm_lines(col = \"ref\", palette = c(\"grey50\", \"grey40\"),\r\n                                   lwd = 2.5, legend.col.show = FALSE) + # roads\r\n      tm_shape(cm) + \r\n      tm_fill(col = \"yellow\", alpha = 0.1) + \r\n      tm_borders(col = \"grey50\") +\r\n      tm_text(text = \"mine\") + # coal mine shapes\r\n      \r\n      tm_shape(cmj) + tm_fill(col = \"yellow\", alpha = 0.5) + \r\n      tm_text(text = \"mine\") +\r\n      tm_borders(col = \"black\")  # Jayant Mine shape\r\n\r\n\r\n\r\n\r\nprepare inset map\r\nhttps://map.igismap.com/gis-data/india/administrative_state_boundary?utm_source=website&utm_medium=datadownload&utm_campaign=india\r\nhttps://map.igismap.com/gis-data/india/administrative_assembly_constituencies_boundary?utm_source=website&utm_medium=datadownload&utm_campaign=india\r\n\r\n\r\nShow code\r\n\r\n# https://www.naturalearthdata.com/download/50m/cultural/ne_50m_admin_0_countries.zip\r\nworld_adm <- st_read(\"D:/spatial-data/admin/ne_world_adm/ne_50m_admin_0_countries.shp\")\r\n\r\n\r\nReading layer `ne_50m_admin_0_countries' from data source \r\n  `D:\\spatial-data\\admin\\ne_world_adm\\ne_50m_admin_0_countries.shp' \r\n  using driver `ESRI Shapefile'\r\nSimple feature collection with 241 features and 94 fields\r\nGeometry type: MULTIPOLYGON\r\nDimension:     XY\r\nBounding box:  xmin: -180 ymin: -89.99893 xmax: 180 ymax: 83.59961\r\nGeodetic CRS:  WGS 84\r\n\r\nShow code\r\n\r\n# Indian states\r\nind_adm <- st_read(\"D:/spatial-data/admin/ind_adm1/ind_adm1.shp\")\r\n\r\n\r\nReading layer `ind_adm1' from data source \r\n  `D:\\spatial-data\\admin\\ind_adm1\\ind_adm1.shp' using driver `ESRI Shapefile'\r\nSimple feature collection with 37 features and 4 fields\r\nGeometry type: MULTIPOLYGON\r\nDimension:     XY\r\nBounding box:  xmin: 68.09348 ymin: 6.754368 xmax: 97.4115 ymax: 37.07761\r\nGeodetic CRS:  WGS 84\r\n\r\nShow code\r\n\r\n# https://map.igismap.com/gis-data/india/administrative_outline_boundary?utm_source=website&utm_medium=datadownload&utm_campaign=india\r\n\r\nind_adm0 <- st_read(\"D:/spatial-data/admin/ind_adm0/ind_adm0.shp\")\r\n\r\n\r\nReading layer `ind_adm0' from data source \r\n  `D:\\spatial-data\\admin\\ind_adm0\\ind_adm0.shp' using driver `ESRI Shapefile'\r\nSimple feature collection with 1 feature and 4 fields\r\nGeometry type: MULTIPOLYGON\r\nDimension:     XY\r\nBounding box:  xmin: 68.18625 ymin: 6.755953 xmax: 97.41529 ymax: 37.07827\r\nGeodetic CRS:  WGS 84\r\n\r\nShow code\r\n\r\n#s_bb <- bb_poly(hs, projection = 4326) # bounding box \r\n\r\ns_bb <- st_bbox(obj = c(xmin = 81.5, xmax = 83.5, ymin = 23.5, ymax = 24.5),\r\n                    crs = st_crs(hs)) %>% \r\n      st_as_sfc()\r\n\r\ninset_map <- tm_shape(world_adm, bbox = st_bbox(ind_adm)) + \r\n      tm_fill(col = \"grey95\") +\r\n      \r\n      tm_shape(ind_adm) + tm_fill(col = \"grey90\") + tm_borders(col = \"grey70\", lwd = 0.5) +\r\n      \r\n      tm_shape(ind_adm0) + tm_borders(lwd = 0.75) +\r\n      \r\n      tm_shape(s_bb) + tm_borders(col = \"red\", lwd = 0.75) +\r\n      \r\n      tm_layout(bg.color = \"#9bbff4\", frame = \"grey85\")\r\n\r\n#rm(cm, cmj, hs, ind_adm, ind_adm0, s_bb, s_roads, water, world_adm) # remove undesired files\r\n\r\n\r\n\r\naspect ratios for main map and inset map\r\n\r\n\r\nShow code\r\n\r\n# aspect ratio for main map\r\nxy <- st_bbox(hs)\r\nasp <- (xy$ymax - xy$ymin)/(xy$xmax - xy$xmin) \r\n\r\n# aspect ratio inset map\r\nxy <- st_bbox(ind_adm)\r\nasp2 <- (xy$ymax - xy$ymin)/(xy$xmax - xy$xmin)\r\n\r\n\r\n\r\nfinal main map\r\n\r\n\r\nShow code\r\n\r\nmain_map <- tm_shape(hs) + \r\n      tm_raster(palette = \"-Greys\", n = 100, style = \"cont\", alpha = 0.7,\r\n                legend.show = FALSE) + # hillshade\r\n      \r\n      tm_graticules(col = \"grey80\") + # graticules\r\n      \r\n      tm_shape(water) + \r\n      tm_raster(palette = c(\"#9bbff4\"), style = \"cat\", legend.show = FALSE) + # water\r\n      \r\n      tm_shape(s_roads) + \r\n      tm_lines(col = \"grey50\", lwd = 2.5) + # roads\r\n      \r\n      tm_shape(cm) + \r\n      tm_fill(col = \"yellow\", alpha = 0.1) + \r\n      tm_borders(col = \"grey50\") +\r\n      tm_text(text = \"mine\") + # coal mine shapes\r\n      \r\n      tm_shape(cmj) + tm_fill(col = \"yellow\", alpha = 0.5) + \r\n      tm_text(text = \"mine\") +\r\n      tm_borders(col = \"black\") + # Jayant Mine shape\r\n      \r\n      tm_compass(position = c(\"right\", \"top\")) + # North Arrow\r\n      \r\n      tm_scale_bar(position = c(0.6, 0.015), breaks = c(0, 2.5, 5, 7.5, 10)) + # scale\r\n      \r\n      tm_add_legend(type = \"fill\", labels = \"Coal Mine\", col = \"yellow\", alpha = 0.1,\r\n                    border.col = \"grey50\") + # mine legend\r\n      tm_add_legend(type = \"line\", labels = \"Road\", col = \"grey50\", lwd = 2.5) + # road legend\r\n      tm_add_legend(type = \"fill\", labels = \"Water\", col = \"#9bbff4\", border.col = NA) + # water legend\r\n      \r\n      tm_layout(legend.position = c(0.0035, 0.01), legend.width = 0.6, legend.height = 0.6*asp2,\r\n                legend.bg.color = \"white\", legend.bg.alpha = 0.9,\r\n                legend.text.size = 0.75, legend.frame = \"grey85\")\r\n\r\nmain_map\r\n\r\n\r\n\r\n\r\narrange and save the final maps\r\n# Create viewport\r\nvp <- viewport(x = 0.115, y = 0.98, width = unit(1, \"inches\"), \r\n               height = unit(1*asp2, \"inches\"), just = c(\"left\", \"top\"))\r\n\r\n# save the map\r\ntmap_save(main_map, filename = \"./data/singrauli-map.png\", insets_tm = inset_map, \r\n          insets_vp = vp, height = asp*7, width = 7, units = \"in\", dpi = 300)\r\n\r\n# save map in pdf\r\ntmap_save(main_map, filename = \"./data/singrauli-map.pdf\", insets_tm = inset_map, \r\n          insets_vp = vp, height = asp*7, width = 7, units = \"in\", dpi = 300)\r\n\r\n\r\nShow code\r\n\r\nknitr::include_graphics(\"./data/singrauli-map.png\")\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-07-21-singrauli-map/singrauli-map_files/figure-html5/hillshade-1.png",
    "last_modified": "2021-07-21T01:29:03+05:30",
    "input_file": {},
    "preview_width": 1248,
    "preview_height": 768
  },
  {
    "path": "posts/welcome/",
    "title": "Welcome to Abhishek Kumar",
    "description": "Welcome to our new blog, Abhishek Kumar. We hope you enjoy \nreading what we have to say!",
    "author": [
      {
        "name": "Abhishek Kumar",
        "url": "https://akumar.netlify.app"
      }
    ],
    "date": "2021-07-21",
    "categories": [],
    "contents": "\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-07-21T01:12:12+05:30",
    "input_file": {}
  }
]
