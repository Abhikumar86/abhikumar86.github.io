---
name: "mwls"
title: "Khol Hi Raitan (Morni Hills) Wildlife Sanctuary"

categories:
  - protected areas
  - siwaliks
  - morni hills
  - khol hi raitan wildlife sanctuary

description: |
  A short description and introduction to Khol Hi Raitan Wildlife Sanctuary.
  
author:
  - name: Abhishek Kumar
    url: https://akumar.netlify.app/
    affiliation: Panjab University, Chandigarh
    affiliation_url: https://puchd.ac.in/
    orcid_id: 0000-0003-2252-7623
    
date: 08-27-2021

bibliography: refs.bib

output:
  distill::distill_article:
    css: style.css
    self_contained: false
    toc: true
    toc_depth: 2
    toc_float: true
    theme: pygments
    code_folding: false
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
```



```{r include=FALSE}
library(dplyr)
library(raster)
library(sf)
library(tmap)

## load the data
# boundary for area of interest
mwls <- st_read("data/pas.gpkg") |> filter(short_name == "MH")

# elevation data 
elev <- raster("D:/spatial-data/dem/n30_e076_1arc_v3.tif") |>
	merge(raster("D:/spatial-data/dem/n30_e077_1arc_v3.tif")) |> 
	crop(extent(76.85, 77.01, 30.66, 30.75)) # morni hills wls

# major roads
sw_roads <- st_read("data/sw_roads.gpkg")
trunk_roads <- sw_roads |> filter(highway == "trunk")
secondary_roads <- sw_roads |> filter(highway == "secondary")
tertiary_roads <- sw_roads |> filter(highway == "tertiary")

# major rivers
sw_streams <- st_read("data/sw_streams.gpkg")
dem_river <- sw_streams |> filter(waterway == "river")
dem_stream <- sw_streams |> filter(waterway == "stream")


# prepare elevation bands
melev <- elev |> mask(mwls)
#m <- c(300, 400, 1, 400, 500, 2, 500, 600, 3, 600, 700, 4, 700, 800, 5)
#rclmat <- matrix(m, ncol=3, byrow=TRUE)
#reclass_dem <- reclassify(melev, rclmat)
#reclass_pol <- rasterToPolygons(reclass_dem, dissolve = TRUE) |> st_as_sf()
#elv_band <- reclass_pol |> 
    #mutate(elev_zone = c("301-400", "401-500", "501-600", "601-700", "701-800"))
#st_write(elv_band, "data/elv_band.gpkg")
elv_band <- st_read("data/elv_band.gpkg")

# prepare hillshade with
hs <- hillShade(
	# extract slope from elevation
	slope = terrain(elev, opt= "slope"),
	
	# extract aspect from elevation
	aspect = terrain(elev, opt= "aspect"), 
	
	# 45 altitude angle and 315 azimuth angle
	angle = 45, direction = 315)

# make the map
mymap <- tm_shape(hs) + 
	tm_raster(palette = "-Greys", n = 100, style = "cont", #alpha = 0.7, 
            legend.show = FALSE) +
	
    tm_shape(elv_band) + tm_fill(col = "elev_zone", alpha = 0.7, palette = "Greens",
                                 title = "Elevation (m)") + 
    
	tm_shape(mwls) + tm_borders(col = "seagreen", lwd = 2.5) +
    
	tm_shape(dem_river) + tm_lines(col = "#9bbff4", lwd = 6) +
	#tm_shape(dem_river) + tm_lines(col = "#4a80f5", lwd = 1) +
	tm_shape(dem_stream) + tm_lines(col = "#9bbff4", lwd = 3) +
	#tm_shape(dem_stream) + tm_lines(col = "#4a80f5", lwd = 0.5) +
	
	
	tm_shape(tertiary_roads) + tm_lines(col = "white", lwd = 1.5) +
	#tm_shape(secondary_roads) + tm_lines(col = "grey50", lwd = 4) +
	tm_shape(secondary_roads) + tm_lines(col = "white", lwd = 3) +
	#tm_shape(trunk_roads) + tm_lines(col = "grey50", lwd = 6) +
	tm_shape(trunk_roads) + tm_lines(col = "white", lwd = 4) +
	
	tm_add_legend(type = "line", labels = "Roads", col = "white", 
                lwd = 4) +
    tm_add_legend(type = "line", labels = "Rivers", col = "skyblue", lwd = 4) +
  
	tm_compass(position = c(0.89, 0.84), size = 2.5, bg.color = "grey90", 
	           bg.alpha = 0.7) +
	tm_scale_bar(position = c(0.26, 0.001), breaks = c(0, 5, 10), text.size = 0.75) +
  
	tm_layout(frame.double.line = T, compass.type = "arrow", 
            legend.position = c(0.015, 0.015), legend.bg.color = "grey90", 
            legend.bg.alpha = 0.7, 
            main.title = "Morni Hills (Khol-Hi-Raitan) Wildlife Sanctuary",
            main.title.position = "center",
            legend.text.size = 0.85)

#tmap_save(mymap, filename = "map.pdf", height = 6, width = 8, units = "in")
#tmap_save(mymap, filename = "data/map.png", height = 6, width = 8, units = "in", dpi = 300)
```


```{r}
knitr::include_graphics("data/map.png")
```

